<!DOCTYPE html>
<html lang="ko">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>ğŸ§ª ê´€ê´‘JS ì™„ì „ í…ŒìŠ¤íŠ¸ í˜ì´ì§€</title>
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }
        
        body {
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            min-height: 100vh;
            padding: 20px;
        }
        
        .container {
            max-width: 1200px;
            margin: 0 auto;
            background: white;
            border-radius: 15px;
            box-shadow: 0 10px 30px rgba(0,0,0,0.3);
            overflow: hidden;
        }
        
        .header {
            background: linear-gradient(45deg, #4CAF50, #45a049);
            color: white;
            padding: 30px;
            text-align: center;
        }
        
        .header h1 {
            font-size: 2.5em;
            margin-bottom: 10px;
        }
        
        .header p {
            font-size: 1.2em;
            opacity: 0.9;
        }
        
        .test-grid {
            display: grid;
            grid-template-columns: 1fr 1fr;
            gap: 20px;
            padding: 30px;
        }
        
        .test-section {
            background: #f8f9fa;
            border-radius: 10px;
            padding: 25px;
            border-left: 5px solid #4CAF50;
        }
        
        .test-section h3 {
            color: #333;
            margin-bottom: 15px;
            font-size: 1.3em;
        }
        
        .input-group {
            margin-bottom: 15px;
        }
        
        .input-group label {
            display: block;
            margin-bottom: 5px;
            font-weight: bold;
            color: #555;
        }
        
        .input-group input, .input-group select {
            width: 100%;
            padding: 10px;
            border: 2px solid #ddd;
            border-radius: 5px;
            font-size: 14px;
            transition: border-color 0.3s;
        }
        
        .input-group input:focus, .input-group select:focus {
            outline: none;
            border-color: #4CAF50;
        }
        
        .btn {
            background: linear-gradient(45deg, #4CAF50, #45a049);
            color: white;
            border: none;
            padding: 12px 25px;
            border-radius: 25px;
            cursor: pointer;
            font-size: 16px;
            font-weight: bold;
            transition: transform 0.2s, box-shadow 0.2s;
            width: 100%;
        }
        
        .btn:hover {
            transform: translateY(-2px);
            box-shadow: 0 5px 15px rgba(76, 175, 80, 0.4);
        }
        
        .btn:disabled {
            background: #ccc;
            cursor: not-allowed;
            transform: none;
            box-shadow: none;
        }
        
        .results {
            grid-column: 1 / -1;
            background: #1e1e1e;
            color: #00ff00;
            border-radius: 10px;
            padding: 20px;
            font-family: 'Courier New', monospace;
            max-height: 600px;
            overflow-y: auto;
            white-space: pre-wrap;
            line-height: 1.4;
        }
        
        .loading {
            text-align: center;
            color: #4CAF50;
            font-weight: bold;
        }
        
        .status {
            display: inline-block;
            padding: 5px 15px;
            border-radius: 15px;
            font-size: 12px;
            font-weight: bold;
            margin-bottom: 10px;
        }
        
        .status.success { background: #4CAF50; color: white; }
        .status.error { background: #f44336; color: white; }
        .status.info { background: #2196F3; color: white; }
        
        .quick-tests {
            grid-column: 1 / -1;
            display: flex;
            gap: 10px;
            margin-bottom: 20px;
            flex-wrap: wrap;
        }
        
        .quick-btn {
            padding: 8px 16px;
            background: #2196F3;
            color: white;
            border: none;
            border-radius: 20px;
            cursor: pointer;
            font-size: 14px;
            transition: background 0.3s;
        }
        
        .quick-btn:hover {
            background: #1976D2;
        }
        
        @media (max-width: 768px) {
            .test-grid {
                grid-template-columns: 1fr;
            }
            
            .header h1 {
                font-size: 2em;
            }
        }
    </style>
</head>
<body>
    <div class="container">
        <div class="header">
            <h1>ğŸ§ª ê´€ê´‘JS ì™„ì „ í…ŒìŠ¤íŠ¸</h1>
            <p>TourAPI 4.0 í†µí•© ì‹œìŠ¤í…œ ì‹¤ì‹œê°„ í…ŒìŠ¤íŠ¸</p>
            <div class="status info" id="apiStatus">API ìƒíƒœ í™•ì¸ ì¤‘...</div>
        </div>
        
        <div class="test-grid">
            <!-- ë¹ ë¥¸ í…ŒìŠ¤íŠ¸ ë²„íŠ¼ë“¤ -->
            <div class="quick-tests">
                <button class="quick-btn" onclick="quickTest('ê²½ë³µê¶')">ğŸ›ï¸ ê²½ë³µê¶ í…ŒìŠ¤íŠ¸</button>
                <button class="quick-btn" onclick="quickTest('Nì„œìš¸íƒ€ì›Œ')">ğŸ—¼ Nì„œìš¸íƒ€ì›Œ í…ŒìŠ¤íŠ¸</button>
                <button class="quick-btn" onclick="quickTest('ë¶€ì‚° í•´ìš´ëŒ€')">ğŸ–ï¸ í•´ìš´ëŒ€ í…ŒìŠ¤íŠ¸</button>
                <button class="quick-btn" onclick="quickTest('ì œì£¼ë„')">ğŸŒ´ ì œì£¼ë„ í…ŒìŠ¤íŠ¸</button>
                <button class="quick-btn" onclick="testPerformance()">âš¡ ì„±ëŠ¥ í…ŒìŠ¤íŠ¸</button>
                <button class="quick-btn" onclick="clearResults()">ğŸ—‘ï¸ ê²°ê³¼ ì§€ìš°ê¸°</button>
            </div>
            
            <!-- ê²€ìƒ‰ í…ŒìŠ¤íŠ¸ -->
            <div class="test-section">
                <h3>ğŸ” ê²€ìƒ‰ í…ŒìŠ¤íŠ¸</h3>
                <div class="input-group">
                    <label>í‚¤ì›Œë“œ</label>
                    <input type="text" id="searchKeyword" placeholder="ì˜ˆ: ê²½ë³µê¶" value="ê²½ë³µê¶">
                </div>
                <div class="input-group">
                    <label>ê²€ìƒ‰ íƒ€ì…</label>
                    <select id="searchType">
                        <option value="auto">ìë™ ì„ íƒ</option>
                        <option value="keyword">í‚¤ì›Œë“œ</option>
                        <option value="location">ìœ„ì¹˜ê¸°ë°˜</option>
                        <option value="area">ì§€ì—­ê¸°ë°˜</option>
                    </select>
                </div>
                <div class="input-group">
                    <label>ê²°ê³¼ ìˆ˜</label>
                    <input type="number" id="searchCount" value="5" min="1" max="20">
                </div>
                <button class="btn" onclick="testSearch()">ğŸ” ê²€ìƒ‰ ì‹¤í–‰</button>
            </div>
            
            <!-- ìƒì„¸ì •ë³´ í…ŒìŠ¤íŠ¸ -->
            <div class="test-section">
                <h3>ğŸ“Š ìƒì„¸ì •ë³´ í…ŒìŠ¤íŠ¸</h3>
                <div class="input-group">
                    <label>Content ID</label>
                    <input type="text" id="contentId" placeholder="ì˜ˆ: 126508" value="126508">
                </div>
                <div class="input-group">
                    <label>ë¶„ì„ ë ˆë²¨</label>
                    <select id="analysisLevel">
                        <option value="basic">ê¸°ë³¸</option>
                        <option value="advanced">ê³ ê¸‰</option>
                        <option value="complete">ì™„ì „</option>
                    </select>
                </div>
                <button class="btn" onclick="testDetail()">ğŸ“Š ìƒì„¸ì •ë³´ ì¡°íšŒ</button>
            </div>
            
            <!-- ìœ„ì¹˜ê¸°ë°˜ í…ŒìŠ¤íŠ¸ -->
            <div class="test-section">
                <h3>ğŸ“ ìœ„ì¹˜ê¸°ë°˜ í…ŒìŠ¤íŠ¸</h3>
                <div class="input-group">
                    <label>ìœ„ë„ (Latitude)</label>
                    <input type="number" id="latitude" placeholder="37.5665" value="37.5665" step="0.0001">
                </div>
                <div class="input-group">
                    <label>ê²½ë„ (Longitude)</label>
                    <input type="number" id="longitude" placeholder="126.9780" value="126.9780" step="0.0001">
                </div>
                <div class="input-group">
                    <label>ë°˜ê²½ (ë¯¸í„°)</label>
                    <input type="number" id="radius" value="1000" min="100" max="20000">
                </div>
                <button class="btn" onclick="testLocation()">ğŸ“ ìœ„ì¹˜ê²€ìƒ‰ ì‹¤í–‰</button>
            </div>
            
            <!-- ì„±ëŠ¥ í…ŒìŠ¤íŠ¸ -->
            <div class="test-section">
                <h3>âš¡ ì„±ëŠ¥ í…ŒìŠ¤íŠ¸</h3>
                <div class="input-group">
                    <label>í…ŒìŠ¤íŠ¸ íšŸìˆ˜</label>
                    <input type="number" id="testCount" value="3" min="1" max="10">
                </div>
                <div class="input-group">
                    <label>ë™ì‹œ ìš”ì²­ ìˆ˜</label>
                    <input type="number" id="concurrentCount" value="2" min="1" max="5">
                </div>
                <button class="btn" onclick="testPerformance()">âš¡ ì„±ëŠ¥ ì¸¡ì •</button>
            </div>
            
            <!-- ê²°ê³¼ í‘œì‹œ ì˜ì—­ -->
            <div class="results" id="results">
ğŸ¯ ê´€ê´‘JS í…ŒìŠ¤íŠ¸ í˜ì´ì§€ ì¤€ë¹„ ì™„ë£Œ!

ğŸ“‹ ì‚¬ìš© ë°©ë²•:
1. ìœ„ì˜ ë¹ ë¥¸ í…ŒìŠ¤íŠ¸ ë²„íŠ¼ìœ¼ë¡œ ì¦‰ì‹œ í…ŒìŠ¤íŠ¸
2. ê° ì„¹ì…˜ì—ì„œ ìƒì„¸ ì„¤ì • í›„ í…ŒìŠ¤íŠ¸
3. ê²°ê³¼ëŠ” ì—¬ê¸°ì— ì‹¤ì‹œê°„ìœ¼ë¡œ í‘œì‹œë©ë‹ˆë‹¤

âš ï¸ ì°¸ê³ ì‚¬í•­:
- ì‹¤ì œ TourAPIë¥¼ ì‚¬ìš©í•˜ë¯€ë¡œ API í‚¤ê°€ í•„ìš”í•©ë‹ˆë‹¤
- CORS ë¬¸ì œë¡œ ì¸í•´ ì¼ë¶€ ë¸Œë¼ìš°ì €ì—ì„œ ì œí•œë  ìˆ˜ ìˆìŠµë‹ˆë‹¤
- ë¡œì»¬ ì„œë²„ì—ì„œ ì‹¤í–‰í•˜ëŠ” ê²ƒì„ ê¶Œì¥í•©ë‹ˆë‹¤

ğŸš€ í…ŒìŠ¤íŠ¸ë¥¼ ì‹œì‘í•´ë³´ì„¸ìš”!
            </div>
        </div>
    </div>

    <script>
        // ì „ì—­ ë³€ìˆ˜
        let isLoading = false;
        let testResults = [];

        // API ê¸°ë³¸ ì„¤ì •
        const API_CONFIG = {
            baseUrl: '/api/tourism-master', // ì‹¤ì œ API ì—”ë“œí¬ì¸íŠ¸
            timeout: 10000,
            retries: 3
        };

        // í˜ì´ì§€ ë¡œë“œ ì‹œ ì´ˆê¸°í™”
        document.addEventListener('DOMContentLoaded', function() {
            log('ğŸ¯ ê´€ê´‘JS í…ŒìŠ¤íŠ¸ í˜ì´ì§€ ì´ˆê¸°í™” ì™„ë£Œ');
            checkAPIStatus();
        });

        // API ìƒíƒœ í™•ì¸
        async function checkAPIStatus() {
            try {
                updateStatus('API ìƒíƒœ í™•ì¸ ì¤‘...', 'info');
                
                // ê°„ë‹¨í•œ í—¬ìŠ¤ì²´í¬ (ì‹¤ì œ êµ¬í˜„ì—ì„œëŠ” ë³„ë„ ì—”ë“œí¬ì¸íŠ¸)
                const response = await fetch(API_CONFIG.baseUrl, {
                    method: 'OPTIONS'
                });
                
                if (response.ok) {
                    updateStatus('API ì—°ê²° ì„±ê³µ', 'success');
                    log('âœ… API ì„œë²„ ì—°ê²° ì„±ê³µ');
                } else {
                    updateStatus('API ì—°ê²° ì‹¤íŒ¨', 'error');
                    log('âŒ API ì„œë²„ ì—°ê²° ì‹¤íŒ¨');
                }
            } catch (error) {
                updateStatus('API ì„œë²„ ì—†ìŒ (ëª¨í‚¹ ëª¨ë“œ)', 'error');
                log('âš ï¸ API ì„œë²„ì— ì—°ê²°í•  ìˆ˜ ì—†ìŠµë‹ˆë‹¤. ëª¨í‚¹ ëª¨ë“œë¡œ ì „í™˜í•©ë‹ˆë‹¤.');
            }
        }

        // ë¹ ë¥¸ í…ŒìŠ¤íŠ¸
        async function quickTest(keyword) {
            document.getElementById('searchKeyword').value = keyword;
            await testSearch();
        }

        // ê²€ìƒ‰ í…ŒìŠ¤íŠ¸
        async function testSearch() {
            if (isLoading) return;
            
            const keyword = document.getElementById('searchKeyword').value;
            const type = document.getElementById('searchType').value;
            const count = document.getElementById('searchCount').value;
            
            if (!keyword.trim()) {
                log('âŒ ê²€ìƒ‰ í‚¤ì›Œë“œë¥¼ ì…ë ¥í•´ì£¼ì„¸ìš”');
                return;
            }
            
            setLoading(true);
            log(`ğŸ” ê²€ìƒ‰ í…ŒìŠ¤íŠ¸ ì‹œì‘: "${keyword}" (íƒ€ì…: ${type}, ê°œìˆ˜: ${count})`);
            
            try {
                const startTime = Date.now();
                
                // API í˜¸ì¶œ ì‹œë®¬ë ˆì´ì…˜ ë˜ëŠ” ì‹¤ì œ í˜¸ì¶œ
                const result = await callAPI('masterSearch', {
                    query: keyword,
                    type: type,
                    numOfRows: count,
                    enhance: 'true'
                });
                
                const endTime = Date.now();
                const duration = endTime - startTime;
                
                log(`âœ… ê²€ìƒ‰ ì™„ë£Œ (${duration}ms)`);
                log('ğŸ“Š ê²€ìƒ‰ ê²°ê³¼:');
                log(JSON.stringify(result, null, 2));
                
                // ê²°ê³¼ ë¶„ì„
                if (result.success && result.data.items) {
                    log(`\nğŸ“ˆ ê²°ê³¼ ë¶„ì„:`);
                    log(`- ì´ ${result.data.items.length}ê°œ ê²°ê³¼`);
                    log(`- í‰ê·  ì™„ì„±ë„: ${calculateAverageCompleteness(result.data.items)}%`);
                    log(`- ì´ë¯¸ì§€ ìˆëŠ” í•­ëª©: ${countItemsWithImages(result.data.items)}ê°œ`);
                }
                
            } catch (error) {
                log(`âŒ ê²€ìƒ‰ ì‹¤íŒ¨: ${error.message}`);
                
                // ëª¨í‚¹ ë°ì´í„°ë¡œ ëŒ€ì²´
                const mockResult = generateMockSearchResult(keyword, count);
                log('\nğŸ­ ëª¨í‚¹ ë°ì´í„°ë¡œ ëŒ€ì²´:');
                log(JSON.stringify(mockResult, null, 2));
            }
            
            setLoading(false);
        }

        // ìƒì„¸ì •ë³´ í…ŒìŠ¤íŠ¸
        async function testDetail() {
            if (isLoading) return;
            
            const contentId = document.getElementById('contentId').value;
            const level = document.getElementById('analysisLevel').value;
            
            if (!contentId.trim()) {
                log('âŒ Content IDë¥¼ ì…ë ¥í•´ì£¼ì„¸ìš”');
                return;
            }
            
            setLoading(true);
            log(`ğŸ“Š ìƒì„¸ì •ë³´ í…ŒìŠ¤íŠ¸ ì‹œì‘: ${contentId} (ë ˆë²¨: ${level})`);
            
            try {
                const startTime = Date.now();
                
                const result = await callAPI('ultimateDetail', {
                    contentId: contentId,
                    maxDepth: level,
                    includeImages: 'true'
                });
                
                const duration = Date.now() - startTime;
                
                log(`âœ… ìƒì„¸ì •ë³´ ì¡°íšŒ ì™„ë£Œ (${duration}ms)`);
                log('ğŸ“Š ìƒì„¸ì •ë³´ ê²°ê³¼:');
                log(JSON.stringify(result, null, 2));
                
                // í’ˆì§ˆ ë¶„ì„
                if (result.success && result.data.analysis) {
                    log(`\nğŸ“ˆ í’ˆì§ˆ ë¶„ì„:`);
                    log(`- ì™„ì„±ë„: ${result.data.analysis.completeness?.overall?.percentage}%`);
                    log(`- ë“±ê¸‰: ${result.data.analysis.completeness?.overall?.grade}`);
                    log(`- ì´ë¯¸ì§€ ìˆ˜: ${result.data.images?.length || 0}ê°œ`);
                }
                
            } catch (error) {
                log(`âŒ ìƒì„¸ì •ë³´ ì¡°íšŒ ì‹¤íŒ¨: ${error.message}`);
                
                // ëª¨í‚¹ ë°ì´í„°ë¡œ ëŒ€ì²´
                const mockResult = generateMockDetailResult(contentId);
                log('\nğŸ­ ëª¨í‚¹ ë°ì´í„°ë¡œ ëŒ€ì²´:');
                log(JSON.stringify(mockResult, null, 2));
            }
            
            setLoading(false);
        }

        // ìœ„ì¹˜ê¸°ë°˜ í…ŒìŠ¤íŠ¸
        async function testLocation() {
            if (isLoading) return;
            
            const lat = document.getElementById('latitude').value;
            const lng = document.getElementById('longitude').value;
            const radius = document.getElementById('radius').value;
            
            if (!lat || !lng) {
                log('âŒ ìœ„ë„ì™€ ê²½ë„ë¥¼ ì…ë ¥í•´ì£¼ì„¸ìš”');
                return;
            }
            
            setLoading(true);
            log(`ğŸ“ ìœ„ì¹˜ê¸°ë°˜ í…ŒìŠ¤íŠ¸ ì‹œì‘: (${lat}, ${lng}) ë°˜ê²½ ${radius}m`);
            
            try {
                const startTime = Date.now();
                
                const result = await callAPI('locationBasedList', {
                    lat: lat,
                    lng: lng,
                    radius: radius,
                    numOfRows: 10
                });
                
                const duration = Date.now() - startTime;
                
                log(`âœ… ìœ„ì¹˜ê²€ìƒ‰ ì™„ë£Œ (${duration}ms)`);
                log('ğŸ“Š ìœ„ì¹˜ê²€ìƒ‰ ê²°ê³¼:');
                log(JSON.stringify(result, null, 2));
                
            } catch (error) {
                log(`âŒ ìœ„ì¹˜ê²€ìƒ‰ ì‹¤íŒ¨: ${error.message}`);
                
                // ëª¨í‚¹ ë°ì´í„°
                const mockResult = generateMockLocationResult(lat, lng);
                log('\nğŸ­ ëª¨í‚¹ ë°ì´í„°ë¡œ ëŒ€ì²´:');
                log(JSON.stringify(mockResult, null, 2));
            }
            
            setLoading(false);
        }

        // ì„±ëŠ¥ í…ŒìŠ¤íŠ¸
        async function testPerformance() {
            if (isLoading) return;
            
            const testCount = parseInt(document.getElementById('testCount').value);
            const concurrentCount = parseInt(document.getElementById('concurrentCount').value);
            
            setLoading(true);
            log(`âš¡ ì„±ëŠ¥ í…ŒìŠ¤íŠ¸ ì‹œì‘: ${testCount}íšŒ í…ŒìŠ¤íŠ¸, ${concurrentCount}ê°œ ë™ì‹œ ìš”ì²­`);
            
            const testCases = [
                { operation: 'masterSearch', params: { query: 'ê²½ë³µê¶' } },
                { operation: 'ultimateDetail', params: { contentId: '126508' } },
                { operation: 'locationBasedList', params: { lat: 37.5665, lng: 126.9780, radius: 1000 } }
            ];
            
            const results = [];
            
            try {
                for (let i = 0; i < testCount; i++) {
                    log(`\nğŸ“Š í…ŒìŠ¤íŠ¸ ë¼ìš´ë“œ ${i + 1}/${testCount}`);
                    
                    const roundPromises = [];
                    
                    for (let j = 0; j < concurrentCount; j++) {
                        const testCase = testCases[j % testCases.length];
                        roundPromises.push(measurePerformance(testCase.operation, testCase.params));
                    }
                    
                    const roundResults = await Promise.allSettled(roundPromises);
                    results.push(...roundResults.map(r => r.status === 'fulfilled' ? r.value : null).filter(Boolean));
                }
                
                // ì„±ëŠ¥ í†µê³„ ê³„ì‚°
                const avgTime = results.reduce((sum, r) => sum + r.duration, 0) / results.length;
                const minTime = Math.min(...results.map(r => r.duration));
                const maxTime = Math.max(...results.map(r => r.duration));
                const successRate = (results.filter(r => r.success).length / results.length) * 100;
                
                log(`\nğŸ“ˆ ì„±ëŠ¥ í…ŒìŠ¤íŠ¸ ê²°ê³¼:`);
                log(`- í‰ê·  ì‘ë‹µì‹œê°„: ${avgTime.toFixed(2)}ms`);
                log(`- ìµœì†Œ ì‘ë‹µì‹œê°„: ${minTime}ms`);
                log(`- ìµœëŒ€ ì‘ë‹µì‹œê°„: ${maxTime}ms`);
                log(`- ì„±ê³µë¥ : ${successRate.toFixed(1)}%`);
                log(`- ì´ ìš”ì²­ ìˆ˜: ${results.length}ê°œ`);
                
            } catch (error) {
                log(`âŒ ì„±ëŠ¥ í…ŒìŠ¤íŠ¸ ì‹¤íŒ¨: ${error.message}`);
            }
            
            setLoading(false);
        }

        // API í˜¸ì¶œ í•¨ìˆ˜
        async function callAPI(operation, params) {
            const url = API_CONFIG.baseUrl;
            const payload = {
                operation: operation,
                ...params
            };
            
            const response = await fetch(url, {
                method: 'POST',
                headers: {
                    'Content-Type': 'application/json'
                },
                body: JSON.stringify(payload)
            });
            
            if (!response.ok) {
                throw new Error(`HTTP ${response.status}: ${response.statusText}`);
            }
            
            return await response.json();
        }

        // ì„±ëŠ¥ ì¸¡ì •
        async function measurePerformance(operation, params) {
            const startTime = Date.now();
            
            try {
                const result = await callAPI(operation, params);
                const duration = Date.now() - startTime;
                
                return {
                    operation,
                    success: result.success,
                    duration,
                    size: JSON.stringify(result).length
                };
            } catch (error) {
                return {
                    operation,
                    success: false,
                    duration: Date.now() - startTime,
                    error: error.message
                };
            }
        }

        // ëª¨í‚¹ ë°ì´í„° ìƒì„±
        function generateMockSearchResult(keyword, count) {
            return {
                success: true,
                data: {
                    items: Array.from({ length: parseInt(count) }, (_, i) => ({
                        contentId: `mock${i + 1}`,
                        title: `${keyword} ê´€ë ¨ ì¥ì†Œ ${i + 1}`,
                        addr1: `ì„œìš¸íŠ¹ë³„ì‹œ ${['ì¢…ë¡œêµ¬', 'ì¤‘êµ¬', 'ìš©ì‚°êµ¬', 'ì„±ë™êµ¬'][i % 4]}`,
                        firstimage: i % 2 === 0 ? 'http://example.com/image.jpg' : null,
                        overview: `${keyword}ì™€ ê´€ë ¨ëœ ë©‹ì§„ ê´€ê´‘ì§€ì…ë‹ˆë‹¤.`,
                        relevanceScore: 90 - i * 5,
                        typeName: 'ê´€ê´‘ì§€'
                    }))
                },
                metadata: {
                    operation: 'masterSearch',
                    performance: { totalTime: 250 },
                    mock: true
                }
            };
        }

        function generateMockDetailResult(contentId) {
            return {
                success: true,
                data: {
                    common: {
                        contentId: contentId,
                        title: 'ê²½ë³µê¶',
                        overview: 'ì¡°ì„  ì™•ì¡°ì˜ ë²•ê¶ìœ¼ë¡œ 1395ë…„ì— ê±´ë¦½ë˜ì—ˆìŠµë‹ˆë‹¤.',
                        location: {
                            address: { main: 'ì„œìš¸íŠ¹ë³„ì‹œ ì¢…ë¡œêµ¬ ì‚¬ì§ë¡œ 161' },
                            coordinates: { lat: 37.5788, lng: 126.9769 }
                        }
                    },
                    analysis: {
                        completeness: {
                            overall: { percentage: 85, grade: 'A' }
                        },
                        quality: {
                            content: { hasOverview: true, hasContact: true }
                        }
                    },
                    images: [
                        { originalUrl: 'http://example.com/gyeongbok1.jpg', isPrimary: true },
                        { originalUrl: 'http://example.com/gyeongbok2.jpg', isPrimary: false }
                    ]
                },
                metadata: {
                    operation: 'ultimateDetail',
                    performance: { totalTime: 450 },
                    mock: true
                }
            };
        }

        function generateMockLocationResult(lat, lng) {
            return {
                success: true,
                data: {
                    items: [
                        {
                            contentId: 'near1',
                            title: 'ì£¼ë³€ ê´€ê´‘ì§€ 1',
                            distance: 0.5,
                            addr1: 'ì„œìš¸íŠ¹ë³„ì‹œ ì¤‘êµ¬'
                        },
                        {
                            contentId: 'near2', 
                            title: 'ì£¼ë³€ ê´€ê´‘ì§€ 2',
                            distance: 0.8,
                            addr1: 'ì„œìš¸íŠ¹ë³„ì‹œ ì¢…ë¡œêµ¬'
                        }
                    ],
                    searchCenter: { lat: parseFloat(lat), lng: parseFloat(lng) }
                },
                metadata: {
                    operation: 'locationBasedList',
                    performance: { totalTime: 300 },
                    mock: true
                }
            };
        }

        // ìœ í‹¸ë¦¬í‹° í•¨ìˆ˜ë“¤
        function log(message) {
            const results = document.getElementById('results');
            const timestamp = new Date().toLocaleTimeString();
            results.textContent += `[${timestamp}] ${message}\n`;
            results.scrollTop = results.scrollHeight;
        }

        function clearResults() {
            document.getElementById('results').textContent = 'ğŸ—‘ï¸ ê²°ê³¼ê°€ ì§€ì›Œì¡ŒìŠµë‹ˆë‹¤. ìƒˆë¡œìš´ í…ŒìŠ¤íŠ¸ë¥¼ ì‹œì‘í•´ì£¼ì„¸ìš”.\n';
        }

        function setLoading(loading) {
            isLoading = loading;
            const buttons = document.querySelectorAll('button');
            buttons.forEach(btn => btn.disabled = loading);
            
            if (loading) {
                log('â³ ì²˜ë¦¬ ì¤‘...');
            }
        }

        function updateStatus(message, type) {
            const statusEl = document.getElementById('apiStatus');
            statusEl.textContent = message;
            statusEl.className = `status ${type}`;
        }

        function calculateAverageCompleteness(items) {
            if (!items.length) return 0;
            const total = items.reduce((sum, item) => {
                return sum + (item.completeness?.percentage || 50);
            }, 0);
            return Math.round(total / items.length);
        }

        function countItemsWithImages(items) {
            return items.filter(item => item.firstimage).length;
        }

        // í‚¤ë³´ë“œ ë‹¨ì¶•í‚¤
        document.addEventListener('keydown', function(e) {
            if (e.ctrlKey || e.metaKey) {
                switch(e.key) {
                    case '1':
                        e.preventDefault();
                        testSearch();
                        break;
                    case '2':
                        e.preventDefault();
                        testDetail();
                        break;
                    case '3':
                        e.preventDefault();
                        testLocation();
                        break;
                    case 'r':
                        e.preventDefault();
                        clearResults();
                        break;
                }
            }
        });
    </script>
</body>
</html>
