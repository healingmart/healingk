<!DOCTYPE html>
<html lang="ko">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>ğŸŒŸ AllTourism API ì´ˆê°„ë‹¨ í…ŒìŠ¤íŠ¸</title>
    <style>
        body { 
            font-family: 'Segoe UI', Arial, sans-serif; 
            max-width: 800px; 
            margin: 20px auto; 
            padding: 20px;
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            color: white;
        }
        .container {
            background: rgba(255,255,255,0.1);
            padding: 30px;
            border-radius: 15px;
            backdrop-filter: blur(10px);
        }
        .test-card { 
            background: rgba(255,255,255,0.2);
            padding: 20px; 
            margin: 15px 0; 
            border-radius: 10px;
            border: 1px solid rgba(255,255,255,0.3);
        }
        .success { 
            background: rgba(40, 167, 69, 0.3); 
            border-color: rgba(40, 167, 69, 0.5);
        }
        .error { 
            background: rgba(220, 53, 69, 0.3); 
            border-color: rgba(220, 53, 69, 0.5);
        }
        button { 
            padding: 12px 25px; 
            margin: 8px; 
            background: #28a745; 
            color: white; 
            border: none; 
            border-radius: 6px; 
            cursor: pointer;
            font-size: 14px;
            transition: all 0.3s;
        }
        button:hover { 
            background: #218838; 
            transform: translateY(-1px);
        }
        button:disabled {
            background: #6c757d;
            cursor: not-allowed;
            transform: none;
        }
        pre { 
            background: rgba(0,0,0,0.3); 
            padding: 15px; 
            border-radius: 5px; 
            overflow-x: auto;
            font-size: 12px;
            border: 1px solid rgba(255,255,255,0.2);
        }
        .loading { 
            display: inline-block; 
            animation: spin 1s linear infinite; 
        }
        @keyframes spin { 
            0% { transform: rotate(0deg); } 
            100% { transform: rotate(360deg); } 
        }
        .setup-box {
            background: rgba(255, 193, 7, 0.2);
            border: 1px solid rgba(255, 193, 7, 0.5);
            padding: 20px;
            border-radius: 10px;
            margin-bottom: 20px;
        }
        input {
            padding: 10px;
            border: 1px solid rgba(255,255,255,0.3);
            border-radius: 5px;
            background: rgba(255,255,255,0.1);
            color: white;
            width: 300px;
            margin: 5px;
        }
        input::placeholder {
            color: rgba(255,255,255,0.7);
        }
    </style>
</head>
<body>
    <div class="container">
        <h1>ğŸŒŸ AllTourism API ì´ˆê°„ë‹¨ í…ŒìŠ¤íŠ¸</h1>
        <p>í•œêµ­ê´€ê´‘ê³µì‚¬ APIë¥¼ ë¸Œë¼ìš°ì €ì—ì„œ ì§ì ‘ í…ŒìŠ¤íŠ¸í•´ë³´ì„¸ìš”!</p>

        <!-- API í‚¤ ì„¤ì • -->
        <div class="setup-box">
            <h3>âš™ï¸ 1ë‹¨ê³„: API í‚¤ ì…ë ¥</h3>
            <input type="text" id="apiKey" placeholder="ì—¬ê¸°ì— TOURISM_API_KEYë¥¼ ì…ë ¥í•˜ì„¸ìš”" />
            <button onclick="APIí‚¤ì €ì¥()">ì €ì¥</button>
            <p>ğŸ’¡ <a href="https://www.data.go.kr/data/15101578/openapi.do" target="_blank" style="color: #ffc107;">API í‚¤ ë°œê¸‰ë°›ê¸°</a></p>
        </div>

        <!-- í…ŒìŠ¤íŠ¸ ë²„íŠ¼ë“¤ -->
        <div class="test-card">
            <h3>ğŸ§ª ë‚´ì¥ í…ŒìŠ¤íŠ¸</h3>
            <button onclick="ì‹œìŠ¤í…œí…ŒìŠ¤íŠ¸()">ì‹œìŠ¤í…œ ì²´í¬</button>
            <button onclick="ìºì‹œí…ŒìŠ¤íŠ¸()">ìºì‹œ í…ŒìŠ¤íŠ¸</button>
            <button onclick="ì–¸ì–´í…ŒìŠ¤íŠ¸()">ë‹¤êµ­ì–´ í…ŒìŠ¤íŠ¸</button>
            <div id="systemResult"></div>
        </div>

        <div class="test-card">
            <h3>ğŸ›ï¸ ì„œìš¸ ê´€ê´‘ì§€ ê²€ìƒ‰</h3>
            <button onclick="ì„œìš¸ê´€ê´‘ì§€í…ŒìŠ¤íŠ¸()">í…ŒìŠ¤íŠ¸ ì‹¤í–‰</button>
            <div id="seoulResult"></div>
        </div>

        <div class="test-card">
            <h3>ğŸ” í‚¤ì›Œë“œ ê²€ìƒ‰ (ê²½ë³µê¶)</h3>
            <button onclick="í‚¤ì›Œë“œí…ŒìŠ¤íŠ¸()">í…ŒìŠ¤íŠ¸ ì‹¤í–‰</button>
            <div id="keywordResult"></div>
        </div>

        <div class="test-card">
            <h3>ğŸ“ ìœ„ì¹˜ ê¸°ë°˜ ê²€ìƒ‰ (ê°•ë‚¨ì—­ 1km)</h3>
            <button onclick="ìœ„ì¹˜í…ŒìŠ¤íŠ¸()">í…ŒìŠ¤íŠ¸ ì‹¤í–‰</button>
            <div id="locationResult"></div>
        </div>

        <div class="test-card">
            <h3>ğŸ“¦ ë°°ì¹˜ í…ŒìŠ¤íŠ¸ (ì—¬ëŸ¬ ê´€ê´‘ì§€ í•œë²ˆì—)</h3>
            <button onclick="ë°°ì¹˜í…ŒìŠ¤íŠ¸()">í…ŒìŠ¤íŠ¸ ì‹¤í–‰</button>
            <div id="batchResult"></div>
        </div>
    </div>

    <script>
        // AllTourism ëª¨ë“ˆì„ ì§ì ‘ í¬í•¨ (ê°„ë‹¨ ë²„ì „)
        let apiKey = '';
        
        function APIí‚¤ì €ì¥() {
            apiKey = document.getElementById('apiKey').value;
            if (apiKey) {
                alert('âœ… API í‚¤ê°€ ì €ì¥ë˜ì—ˆìŠµë‹ˆë‹¤!');
                localStorage.setItem('tourism_api_key', apiKey);
            } else {
                alert('âŒ API í‚¤ë¥¼ ì…ë ¥í•´ì£¼ì„¸ìš”!');
            }
        }

        // í˜ì´ì§€ ë¡œë“œ ì‹œ ì €ì¥ëœ API í‚¤ ë¶ˆëŸ¬ì˜¤ê¸°
        window.onload = function() {
            const savedKey = localStorage.getItem('tourism_api_key');
            if (savedKey) {
                document.getElementById('apiKey').value = savedKey;
                apiKey = savedKey;
            }
        }

        function ë²„íŠ¼ë¹„í™œì„±í™”(buttonElement) {
            buttonElement.disabled = true;
            buttonElement.innerHTML = '<span class="loading">â³</span> í…ŒìŠ¤íŠ¸ ì¤‘...';
        }

        function ë²„íŠ¼í™œì„±í™”(buttonElement, text) {
            buttonElement.disabled = false;
            buttonElement.innerHTML = text;
        }

        // ê°€ìƒ API í˜¸ì¶œ (ì‹¤ì œë¡œëŠ” í•œêµ­ê´€ê´‘ê³µì‚¬ APIë¥¼ í˜¸ì¶œ)
        async function ê´€ê´‘ê³µì‚¬APIí˜¸ì¶œ(endpoint, params) {
            if (!apiKey) {
                throw new Error('API í‚¤ë¥¼ ë¨¼ì € ì…ë ¥í•´ì£¼ì„¸ìš”!');
            }

            try {
                const baseUrl = 'https://apis.data.go.kr/B551011/KorService2';
                const url = `${baseUrl}/${endpoint}`;
                
                const queryParams = new URLSearchParams({
                    serviceKey: apiKey,
                    MobileOS: 'ETC',
                    MobileApp: 'AllTourism-Test',
                    _type: 'json',
                    ...params
                });

                const response = await fetch(`${url}?${queryParams}`);
                
                if (!response.ok) {
                    throw new Error(`HTTP ${response.status}: ${response.statusText}`);
                }
                
                const data = await response.json();
                
                // API ì‘ë‹µ ê²€ì¦
                if (!data.response) {
                    throw new Error('API ì‘ë‹µì´ ì˜¬ë°”ë¥´ì§€ ì•ŠìŠµë‹ˆë‹¤');
                }
                
                if (data.response.header.resultCode !== '0000') {
                    throw new Error(`API ì˜¤ë¥˜: ${data.response.header.resultMsg}`);
                }
                
                return data;
                
            } catch (error) {
                if (error.message.includes('CORS')) {
                    throw new Error('ğŸ”’ CORS ì˜¤ë¥˜: ë¸Œë¼ìš°ì € ë³´ì•ˆ ì •ì±…ìœ¼ë¡œ ì¸í•´ ì§ì ‘ API í˜¸ì¶œì´ ì œí•œë©ë‹ˆë‹¤. ì„œë²„ë¥¼ í†µí•´ í…ŒìŠ¤íŠ¸í•´ì£¼ì„¸ìš”.');
                }
                throw error;
            }
        }

        async function ì‹œìŠ¤í…œí…ŒìŠ¤íŠ¸() {
            const result = document.getElementById('systemResult');
            const button = event.target;
            ë²„íŠ¼ë¹„í™œì„±í™”(button);
            
            try {
                // ê°„ë‹¨í•œ ì‹œìŠ¤í…œ ì²´í¬
                const systemInfo = {
                    browser: navigator.userAgent,
                    language: navigator.language,
                    timestamp: new Date().toISOString(),
                    memory: performance.memory ? {
                        used: Math.round(performance.memory.usedJSHeapSize / 1024 / 1024),
                        total: Math.round(performance.memory.totalJSHeapSize / 1024 / 1024)
                    } : 'Not available'
                };
                
                result.className = 'success';
                result.innerHTML = `
                    <h4>âœ… ì‹œìŠ¤í…œ ì²´í¬ ì„±ê³µ!</h4>
                    <pre>${JSON.stringify(systemInfo, null, 2)}</pre>
                `;
                
            } catch (error) {
                result.className = 'error';
                result.innerHTML = `<h4>âŒ ì‹œìŠ¤í…œ ì²´í¬ ì‹¤íŒ¨</h4><p>${error.message}</p>`;
            }
            
            ë²„íŠ¼í™œì„±í™”(button, 'ì‹œìŠ¤í…œ ì²´í¬');
        }

        async function ìºì‹œí…ŒìŠ¤íŠ¸() {
            const result = document.getElementById('systemResult');
            
            try {
                // ë¡œì»¬ ìŠ¤í† ë¦¬ì§€ë¥¼ ì´ìš©í•œ ê°„ë‹¨í•œ ìºì‹œ í…ŒìŠ¤íŠ¸
                const testKey = 'test-cache-' + Date.now();
                const testData = { message: 'Hello Cache!', timestamp: Date.now() };
                
                localStorage.setItem(testKey, JSON.stringify(testData));
                const retrieved = JSON.parse(localStorage.getItem(testKey));
                localStorage.removeItem(testKey);
                
                result.className = 'success';
                result.innerHTML = `
                    <h4>âœ… ìºì‹œ í…ŒìŠ¤íŠ¸ ì„±ê³µ!</h4>
                    <p>ì €ì¥í•œ ë°ì´í„°: ${JSON.stringify(testData)}</p>
                    <p>ë¶ˆëŸ¬ì˜¨ ë°ì´í„°: ${JSON.stringify(retrieved)}</p>
                `;
                
            } catch (error) {
                result.className = 'error';
                result.innerHTML = `<h4>âŒ ìºì‹œ í…ŒìŠ¤íŠ¸ ì‹¤íŒ¨</h4><p>${error.message}</p>`;
            }
        }

        async function ì–¸ì–´í…ŒìŠ¤íŠ¸() {
            const result = document.getElementById('systemResult');
            
            try {
                const messages = {
                    ko: 'ì•ˆë…•í•˜ì„¸ìš”! í•œêµ­ê´€ê´‘ê³µì‚¬ API í…ŒìŠ¤íŠ¸ì…ë‹ˆë‹¤.',
                    en: 'Hello! This is Korea Tourism API test.',
                    ja: 'ã“ã‚“ã«ã¡ã¯ï¼éŸ“å›½è¦³å…‰å…¬ç¤¾APIãƒ†ã‚¹ãƒˆã§ã™ã€‚',
                    'zh-cn': 'æ‚¨å¥½ï¼è¿™æ˜¯éŸ©å›½æ—…æ¸¸å…¬ç¤¾APIæµ‹è¯•ã€‚'
                };
                
                result.className = 'success';
                result.innerHTML = `
                    <h4>âœ… ë‹¤êµ­ì–´ í…ŒìŠ¤íŠ¸ ì„±ê³µ!</h4>
                    <pre>${JSON.stringify(messages, null, 2)}</pre>
                `;
                
            } catch (error) {
                result.className = 'error';
                result.innerHTML = `<h4>âŒ ë‹¤êµ­ì–´ í…ŒìŠ¤íŠ¸ ì‹¤íŒ¨</h4><p>${error.message}</p>`;
            }
        }

        async function ì„œìš¸ê´€ê´‘ì§€í…ŒìŠ¤íŠ¸() {
            const result = document.getElementById('seoulResult');
            const button = event.target;
            ë²„íŠ¼ë¹„í™œì„±í™”(button);
            
            try {
                const data = await ê´€ê´‘ê³µì‚¬APIí˜¸ì¶œ('areaBasedList2', {
                    areaCode: '1',      // ì„œìš¸
                    numOfRows: '5',
                    pageNo: '1',
                    arrange: 'C'
                });
                
                const items = data.response.body.items.item || [];
                
                result.className = 'success';
                result.innerHTML = `
                    <h4>âœ… ì„œìš¸ ê´€ê´‘ì§€ ê²€ìƒ‰ ì„±ê³µ!</h4>
                    <p>ğŸ“Š ì°¾ì€ ê´€ê´‘ì§€: ${items.length}ê°œ</p>
                    ${items.length > 0 ? `
                        <p>ğŸ·ï¸ ì²« ë²ˆì§¸: ${items[0].title}</p>
                        <p>ğŸ“ ì£¼ì†Œ: ${items[0].addr1 || 'ì£¼ì†Œ ì •ë³´ ì—†ìŒ'}</p>
                        <details>
                            <summary>ì „ì²´ ë°ì´í„° ë³´ê¸°</summary>
                            <pre>${JSON.stringify(items[0], null, 2)}</pre>
                        </details>
                    ` : '<p>ë°ì´í„°ê°€ ì—†ìŠµë‹ˆë‹¤.</p>'}
                `;
                
            } catch (error) {
                result.className = 'error';
                result.innerHTML = `<h4>âŒ ì„œìš¸ ê´€ê´‘ì§€ ê²€ìƒ‰ ì‹¤íŒ¨</h4><p>${error.message}</p>`;
            }
            
            ë²„íŠ¼í™œì„±í™”(button, 'í…ŒìŠ¤íŠ¸ ì‹¤í–‰');
        }

        async function í‚¤ì›Œë“œí…ŒìŠ¤íŠ¸() {
            const result = document.getElementById('keywordResult');
            const button = event.target;
            ë²„íŠ¼ë¹„í™œì„±í™”(button);
            
            try {
                const data = await ê´€ê´‘ê³µì‚¬APIí˜¸ì¶œ('searchKeyword2', {
                    keyword: 'ê²½ë³µê¶',
                    numOfRows: '3',
                    pageNo: '1',
                    arrange: 'C'
                });
                
                const items = data.response.body.items.item || [];
                
                result.className = 'success';
                result.innerHTML = `
                    <h4>âœ… í‚¤ì›Œë“œ ê²€ìƒ‰ ì„±ê³µ!</h4>
                    <p>ğŸ” "ê²½ë³µê¶" ê²€ìƒ‰ ê²°ê³¼: ${items.length}ê°œ</p>
                    ${items.map((item, index) => `
                        <div style="margin: 10px 0; padding: 10px; background: rgba(255,255,255,0.1); border-radius: 5px;">
                            <strong>${index + 1}. ${item.title}</strong><br>
                            ğŸ“ ${item.addr1 || 'ì£¼ì†Œ ì •ë³´ ì—†ìŒ'}<br>
                            ğŸ“ ${item.tel || 'ì „í™”ë²ˆí˜¸ ì—†ìŒ'}
                        </div>
                    `).join('')}
                `;
                
            } catch (error) {
                result.className = 'error';
                result.innerHTML = `<h4>âŒ í‚¤ì›Œë“œ ê²€ìƒ‰ ì‹¤íŒ¨</h4><p>${error.message}</p>`;
            }
            
            ë²„íŠ¼í™œì„±í™”(button, 'í…ŒìŠ¤íŠ¸ ì‹¤í–‰');
        }

        async function ìœ„ì¹˜í…ŒìŠ¤íŠ¸() {
            const result = document.getElementById('locationResult');
            const button = event.target;
            ë²„íŠ¼ë¹„í™œì„±í™”(button);
            
            try {
                const data = await ê´€ê´‘ê³µì‚¬APIí˜¸ì¶œ('locationBasedList2', {
                    mapX: '127.0276',   // ê°•ë‚¨ì—­ ê²½ë„
                    mapY: '37.4979',    // ê°•ë‚¨ì—­ ìœ„ë„
                    radius: '1000',     // 1km
                    numOfRows: '3',
                    pageNo: '1'
                });
                
                const items = data.response.body.items.item || [];
                
                result.className = 'success';
                result.innerHTML = `
                    <h4>âœ… ìœ„ì¹˜ ê¸°ë°˜ ê²€ìƒ‰ ì„±ê³µ!</h4>
                    <p>ğŸ“ ê°•ë‚¨ì—­ 1km ë°˜ê²½ ë‚´ ê´€ê´‘ì§€: ${items.length}ê°œ</p>
                    ${items.map((item, index) => `
                        <div style="margin: 10px 0; padding: 10px; background: rgba(255,255,255,0.1); border-radius: 5px;">
                            <strong>${index + 1}. ${item.title}</strong><br>
                            ğŸ“ ê±°ë¦¬: ${item.dist ? Math.round(item.dist) + 'm' : 'ì •ë³´ ì—†ìŒ'}<br>
                            ğŸ“ ${item.addr1 || 'ì£¼ì†Œ ì •ë³´ ì—†ìŒ'}
                        </div>
                    `).join('')}
                `;
                
            } catch (error) {
                result.className = 'error';
                result.innerHTML = `<h4>âŒ ìœ„ì¹˜ ê¸°ë°˜ ê²€ìƒ‰ ì‹¤íŒ¨</h4><p>${error.message}</p>`;
            }
            
            ë²„íŠ¼í™œì„±í™”(button, 'í…ŒìŠ¤íŠ¸ ì‹¤í–‰');
        }

        async function ë°°ì¹˜í…ŒìŠ¤íŠ¸() {
            const result = document.getElementById('batchResult');
            const button = event.target;
            ë²„íŠ¼ë¹„í™œì„±í™”(button);
            
            try {
                // ë¨¼ì € ëª‡ ê°œì˜ contentIdë¥¼ ê°€ì ¸ì˜¨ í›„ ìƒì„¸ ì •ë³´ ì¡°íšŒ
                const listData = await ê´€ê´‘ê³µì‚¬APIí˜¸ì¶œ('areaBasedList2', {
                    areaCode: '1',
                    numOfRows: '3',
                    pageNo: '1'
                });
                
                const items = listData.response.body.items.item || [];
                const contentIds = items.slice(0, 2).map(item => item.contentid);
                
                if (contentIds.length === 0) {
                    throw new Error('í…ŒìŠ¤íŠ¸í•  contentIdë¥¼ ê°€ì ¸ì˜¬ ìˆ˜ ì—†ìŠµë‹ˆë‹¤');
                }
                
                // ê° contentIdì— ëŒ€í•´ ìƒì„¸ ì •ë³´ ì¡°íšŒ
                const detailPromises = contentIds.map(async (contentId) => {
                    try {
                        const detailData = await ê´€ê´‘ê³µì‚¬APIí˜¸ì¶œ('detailCommon2', {
                            contentId: contentId,
                            defaultYN: 'Y',
                            firstImageYN: 'Y',
                            areacodeYN: 'Y',
                            catcodeYN: 'Y',
                            addrinfoYN: 'Y',
                            mapinfoYN: 'Y',
                            overviewYN: 'Y'
                        });
                        return { contentId, success: true, data: detailData.response.body.items.item[0] };
                    } catch (error) {
                        return { contentId, success: false, error: error.message };
                    }
                });
                
                const results = await Promise.all(detailPromises);
                const successCount = results.filter(r => r.success).length;
                
                result.className = 'success';
                result.innerHTML = `
                    <h4>âœ… ë°°ì¹˜ í…ŒìŠ¤íŠ¸ ì™„ë£Œ!</h4>
                    <p>ğŸ“Š ì´ ${results.length}ê°œ ì¤‘ ${successCount}ê°œ ì„±ê³µ</p>
                    ${results.map((item, index) => `
                        <div style="margin: 10px 0; padding: 10px; background: rgba(255,255,255,0.1); border-radius: 5px;">
                            <strong>${index + 1}. ContentID: ${item.contentId}</strong><br>
                            ${item.success ? 
                                `âœ… ì„±ê³µ: ${item.data.title}<br>ğŸ“ ${item.data.addr1 || 'ì£¼ì†Œ ì—†ìŒ'}` : 
                                `âŒ ì‹¤íŒ¨: ${item.error}`
                            }
                        </div>
                    `).join('')}
                `;
                
            } catch (error) {
                result.className = 'error';
                result.innerHTML = `<h4>âŒ ë°°ì¹˜ í…ŒìŠ¤íŠ¸ ì‹¤íŒ¨</h4><p>${error.message}</p>`;
            }
            
            ë²„íŠ¼í™œì„±í™”(button, 'í…ŒìŠ¤íŠ¸ ì‹¤í–‰');
        }
    </script>
</body>
</html><!DOCTYPE html>
<html lang="ko">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>ğŸŒŸ AllTourism API ì´ˆê°„ë‹¨ í…ŒìŠ¤íŠ¸</title>
    <style>
        body { 
            font-family: 'Segoe UI', Arial, sans-serif; 
            max-width: 800px; 
            margin: 20px auto; 
            padding: 20px;
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            color: white;
        }
        .container {
            background: rgba(255,255,255,0.1);
            padding: 30px;
            border-radius: 15px;
            backdrop-filter: blur(10px);
        }
        .test-card { 
            background: rgba(255,255,255,0.2);
            padding: 20px; 
            margin: 15px 0; 
            border-radius: 10px;
            border: 1px solid rgba(255,255,255,0.3);
        }
        .success { 
            background: rgba(40, 167, 69, 0.3); 
            border-color: rgba(40, 167, 69, 0.5);
        }
        .error { 
            background: rgba(220, 53, 69, 0.3); 
            border-color: rgba(220, 53, 69, 0.5);
        }
        button { 
            padding: 12px 25px; 
            margin: 8px; 
            background: #28a745; 
            color: white; 
            border: none; 
            border-radius: 6px; 
            cursor: pointer;
            font-size: 14px;
            transition: all 0.3s;
        }
        button:hover { 
            background: #218838; 
            transform: translateY(-1px);
        }
        button:disabled {
            background: #6c757d;
            cursor: not-allowed;
            transform: none;
        }
        pre { 
            background: rgba(0,0,0,0.3); 
            padding: 15px; 
            border-radius: 5px; 
            overflow-x: auto;
            font-size: 12px;
            border: 1px solid rgba(255,255,255,0.2);
        }
        .loading { 
            display: inline-block; 
            animation: spin 1s linear infinite; 
        }
        @keyframes spin { 
            0% { transform: rotate(0deg); } 
            100% { transform: rotate(360deg); } 
        }
        .setup-box {
            background: rgba(255, 193, 7, 0.2);
            border: 1px solid rgba(255, 193, 7, 0.5);
            padding: 20px;
            border-radius: 10px;
            margin-bottom: 20px;
        }
        input {
            padding: 10px;
            border: 1px solid rgba(255,255,255,0.3);
            border-radius: 5px;
            background: rgba(255,255,255,0.1);
            color: white;
            width: 300px;
            margin: 5px;
        }
        input::placeholder {
            color: rgba(255,255,255,0.7);
        }
    </style>
</head>
<body>
    <div class="container">
        <h1>ğŸŒŸ AllTourism API ì´ˆê°„ë‹¨ í…ŒìŠ¤íŠ¸</h1>
        <p>í•œêµ­ê´€ê´‘ê³µì‚¬ APIë¥¼ ë¸Œë¼ìš°ì €ì—ì„œ ì§ì ‘ í…ŒìŠ¤íŠ¸í•´ë³´ì„¸ìš”!</p>

        <!-- API í‚¤ ì„¤ì • -->
        <div class="setup-box">
            <h3>âš™ï¸ 1ë‹¨ê³„: API í‚¤ ì…ë ¥</h3>
            <input type="text" id="apiKey" placeholder="ì—¬ê¸°ì— TOURISM_API_KEYë¥¼ ì…ë ¥í•˜ì„¸ìš”" />
            <button onclick="APIí‚¤ì €ì¥()">ì €ì¥</button>
            <p>ğŸ’¡ <a href="https://www.data.go.kr/data/15101578/openapi.do" target="_blank" style="color: #ffc107;">API í‚¤ ë°œê¸‰ë°›ê¸°</a></p>
        </div>

        <!-- í…ŒìŠ¤íŠ¸ ë²„íŠ¼ë“¤ -->
        <div class="test-card">
            <h3>ğŸ§ª ë‚´ì¥ í…ŒìŠ¤íŠ¸</h3>
            <button onclick="ì‹œìŠ¤í…œí…ŒìŠ¤íŠ¸()">ì‹œìŠ¤í…œ ì²´í¬</button>
            <button onclick="ìºì‹œí…ŒìŠ¤íŠ¸()">ìºì‹œ í…ŒìŠ¤íŠ¸</button>
            <button onclick="ì–¸ì–´í…ŒìŠ¤íŠ¸()">ë‹¤êµ­ì–´ í…ŒìŠ¤íŠ¸</button>
            <div id="systemResult"></div>
        </div>

        <div class="test-card">
            <h3>ğŸ›ï¸ ì„œìš¸ ê´€ê´‘ì§€ ê²€ìƒ‰</h3>
            <button onclick="ì„œìš¸ê´€ê´‘ì§€í…ŒìŠ¤íŠ¸()">í…ŒìŠ¤íŠ¸ ì‹¤í–‰</button>
            <div id="seoulResult"></div>
        </div>

        <div class="test-card">
            <h3>ğŸ” í‚¤ì›Œë“œ ê²€ìƒ‰ (ê²½ë³µê¶)</h3>
            <button onclick="í‚¤ì›Œë“œí…ŒìŠ¤íŠ¸()">í…ŒìŠ¤íŠ¸ ì‹¤í–‰</button>
            <div id="keywordResult"></div>
        </div>

        <div class="test-card">
            <h3>ğŸ“ ìœ„ì¹˜ ê¸°ë°˜ ê²€ìƒ‰ (ê°•ë‚¨ì—­ 1km)</h3>
            <button onclick="ìœ„ì¹˜í…ŒìŠ¤íŠ¸()">í…ŒìŠ¤íŠ¸ ì‹¤í–‰</button>
            <div id="locationResult"></div>
        </div>

        <div class="test-card">
            <h3>ğŸ“¦ ë°°ì¹˜ í…ŒìŠ¤íŠ¸ (ì—¬ëŸ¬ ê´€ê´‘ì§€ í•œë²ˆì—)</h3>
            <button onclick="ë°°ì¹˜í…ŒìŠ¤íŠ¸()">í…ŒìŠ¤íŠ¸ ì‹¤í–‰</button>
            <div id="batchResult"></div>
        </div>
    </div>

    <script>
        // AllTourism ëª¨ë“ˆì„ ì§ì ‘ í¬í•¨ (ê°„ë‹¨ ë²„ì „)
        let apiKey = '';
        
        function APIí‚¤ì €ì¥() {
            apiKey = document.getElementById('apiKey').value;
            if (apiKey) {
                alert('âœ… API í‚¤ê°€ ì €ì¥ë˜ì—ˆìŠµë‹ˆë‹¤!');
                localStorage.setItem('tourism_api_key', apiKey);
            } else {
                alert('âŒ API í‚¤ë¥¼ ì…ë ¥í•´ì£¼ì„¸ìš”!');
            }
        }

        // í˜ì´ì§€ ë¡œë“œ ì‹œ ì €ì¥ëœ API í‚¤ ë¶ˆëŸ¬ì˜¤ê¸°
        window.onload = function() {
            const savedKey = localStorage.getItem('tourism_api_key');
            if (savedKey) {
                document.getElementById('apiKey').value = savedKey;
                apiKey = savedKey;
            }
        }

        function ë²„íŠ¼ë¹„í™œì„±í™”(buttonElement) {
            buttonElement.disabled = true;
            buttonElement.innerHTML = '<span class="loading">â³</span> í…ŒìŠ¤íŠ¸ ì¤‘...';
        }

        function ë²„íŠ¼í™œì„±í™”(buttonElement, text) {
            buttonElement.disabled = false;
            buttonElement.innerHTML = text;
        }

        // ê°€ìƒ API í˜¸ì¶œ (ì‹¤ì œë¡œëŠ” í•œêµ­ê´€ê´‘ê³µì‚¬ APIë¥¼ í˜¸ì¶œ)
        async function ê´€ê´‘ê³µì‚¬APIí˜¸ì¶œ(endpoint, params) {
            if (!apiKey) {
                throw new Error('API í‚¤ë¥¼ ë¨¼ì € ì…ë ¥í•´ì£¼ì„¸ìš”!');
            }

            try {
                const baseUrl = 'https://apis.data.go.kr/B551011/KorService2';
                const url = `${baseUrl}/${endpoint}`;
                
                const queryParams = new URLSearchParams({
                    serviceKey: apiKey,
                    MobileOS: 'ETC',
                    MobileApp: 'AllTourism-Test',
                    _type: 'json',
                    ...params
                });

                const response = await fetch(`${url}?${queryParams}`);
                
                if (!response.ok) {
                    throw new Error(`HTTP ${response.status}: ${response.statusText}`);
                }
                
                const data = await response.json();
                
                // API ì‘ë‹µ ê²€ì¦
                if (!data.response) {
                    throw new Error('API ì‘ë‹µì´ ì˜¬ë°”ë¥´ì§€ ì•ŠìŠµë‹ˆë‹¤');
                }
                
                if (data.response.header.resultCode !== '0000') {
                    throw new Error(`API ì˜¤ë¥˜: ${data.response.header.resultMsg}`);
                }
                
                return data;
                
            } catch (error) {
                if (error.message.includes('CORS')) {
                    throw new Error('ğŸ”’ CORS ì˜¤ë¥˜: ë¸Œë¼ìš°ì € ë³´ì•ˆ ì •ì±…ìœ¼ë¡œ ì¸í•´ ì§ì ‘ API í˜¸ì¶œì´ ì œí•œë©ë‹ˆë‹¤. ì„œë²„ë¥¼ í†µí•´ í…ŒìŠ¤íŠ¸í•´ì£¼ì„¸ìš”.');
                }
                throw error;
            }
        }

        async function ì‹œìŠ¤í…œí…ŒìŠ¤íŠ¸() {
            const result = document.getElementById('systemResult');
            const button = event.target;
            ë²„íŠ¼ë¹„í™œì„±í™”(button);
            
            try {
                // ê°„ë‹¨í•œ ì‹œìŠ¤í…œ ì²´í¬
                const systemInfo = {
                    browser: navigator.userAgent,
                    language: navigator.language,
                    timestamp: new Date().toISOString(),
                    memory: performance.memory ? {
                        used: Math.round(performance.memory.usedJSHeapSize / 1024 / 1024),
                        total: Math.round(performance.memory.totalJSHeapSize / 1024 / 1024)
                    } : 'Not available'
                };
                
                result.className = 'success';
                result.innerHTML = `
                    <h4>âœ… ì‹œìŠ¤í…œ ì²´í¬ ì„±ê³µ!</h4>
                    <pre>${JSON.stringify(systemInfo, null, 2)}</pre>
                `;
                
            } catch (error) {
                result.className = 'error';
                result.innerHTML = `<h4>âŒ ì‹œìŠ¤í…œ ì²´í¬ ì‹¤íŒ¨</h4><p>${error.message}</p>`;
            }
            
            ë²„íŠ¼í™œì„±í™”(button, 'ì‹œìŠ¤í…œ ì²´í¬');
        }

        async function ìºì‹œí…ŒìŠ¤íŠ¸() {
            const result = document.getElementById('systemResult');
            
            try {
                // ë¡œì»¬ ìŠ¤í† ë¦¬ì§€ë¥¼ ì´ìš©í•œ ê°„ë‹¨í•œ ìºì‹œ í…ŒìŠ¤íŠ¸
                const testKey = 'test-cache-' + Date.now();
                const testData = { message: 'Hello Cache!', timestamp: Date.now() };
                
                localStorage.setItem(testKey, JSON.stringify(testData));
                const retrieved = JSON.parse(localStorage.getItem(testKey));
                localStorage.removeItem(testKey);
                
                result.className = 'success';
                result.innerHTML = `
                    <h4>âœ… ìºì‹œ í…ŒìŠ¤íŠ¸ ì„±ê³µ!</h4>
                    <p>ì €ì¥í•œ ë°ì´í„°: ${JSON.stringify(testData)}</p>
                    <p>ë¶ˆëŸ¬ì˜¨ ë°ì´í„°: ${JSON.stringify(retrieved)}</p>
                `;
                
            } catch (error) {
                result.className = 'error';
                result.innerHTML = `<h4>âŒ ìºì‹œ í…ŒìŠ¤íŠ¸ ì‹¤íŒ¨</h4><p>${error.message}</p>`;
            }
        }

        async function ì–¸ì–´í…ŒìŠ¤íŠ¸() {
            const result = document.getElementById('systemResult');
            
            try {
                const messages = {
                    ko: 'ì•ˆë…•í•˜ì„¸ìš”! í•œêµ­ê´€ê´‘ê³µì‚¬ API í…ŒìŠ¤íŠ¸ì…ë‹ˆë‹¤.',
                    en: 'Hello! This is Korea Tourism API test.',
                    ja: 'ã“ã‚“ã«ã¡ã¯ï¼éŸ“å›½è¦³å…‰å…¬ç¤¾APIãƒ†ã‚¹ãƒˆã§ã™ã€‚',
                    'zh-cn': 'æ‚¨å¥½ï¼è¿™æ˜¯éŸ©å›½æ—…æ¸¸å…¬ç¤¾APIæµ‹è¯•ã€‚'
                };
                
                result.className = 'success';
                result.innerHTML = `
                    <h4>âœ… ë‹¤êµ­ì–´ í…ŒìŠ¤íŠ¸ ì„±ê³µ!</h4>
                    <pre>${JSON.stringify(messages, null, 2)}</pre>
                `;
                
            } catch (error) {
                result.className = 'error';
                result.innerHTML = `<h4>âŒ ë‹¤êµ­ì–´ í…ŒìŠ¤íŠ¸ ì‹¤íŒ¨</h4><p>${error.message}</p>`;
            }
        }

        async function ì„œìš¸ê´€ê´‘ì§€í…ŒìŠ¤íŠ¸() {
            const result = document.getElementById('seoulResult');
            const button = event.target;
            ë²„íŠ¼ë¹„í™œì„±í™”(button);
            
            try {
                const data = await ê´€ê´‘ê³µì‚¬APIí˜¸ì¶œ('areaBasedList2', {
                    areaCode: '1',      // ì„œìš¸
                    numOfRows: '5',
                    pageNo: '1',
                    arrange: 'C'
                });
                
                const items = data.response.body.items.item || [];
                
                result.className = 'success';
                result.innerHTML = `
                    <h4>âœ… ì„œìš¸ ê´€ê´‘ì§€ ê²€ìƒ‰ ì„±ê³µ!</h4>
                    <p>ğŸ“Š ì°¾ì€ ê´€ê´‘ì§€: ${items.length}ê°œ</p>
                    ${items.length > 0 ? `
                        <p>ğŸ·ï¸ ì²« ë²ˆì§¸: ${items[0].title}</p>
                        <p>ğŸ“ ì£¼ì†Œ: ${items[0].addr1 || 'ì£¼ì†Œ ì •ë³´ ì—†ìŒ'}</p>
                        <details>
                            <summary>ì „ì²´ ë°ì´í„° ë³´ê¸°</summary>
                            <pre>${JSON.stringify(items[0], null, 2)}</pre>
                        </details>
                    ` : '<p>ë°ì´í„°ê°€ ì—†ìŠµë‹ˆë‹¤.</p>'}
                `;
                
            } catch (error) {
                result.className = 'error';
                result.innerHTML = `<h4>âŒ ì„œìš¸ ê´€ê´‘ì§€ ê²€ìƒ‰ ì‹¤íŒ¨</h4><p>${error.message}</p>`;
            }
            
            ë²„íŠ¼í™œì„±í™”(button, 'í…ŒìŠ¤íŠ¸ ì‹¤í–‰');
        }

        async function í‚¤ì›Œë“œí…ŒìŠ¤íŠ¸() {
            const result = document.getElementById('keywordResult');
            const button = event.target;
            ë²„íŠ¼ë¹„í™œì„±í™”(button);
            
            try {
                const data = await ê´€ê´‘ê³µì‚¬APIí˜¸ì¶œ('searchKeyword2', {
                    keyword: 'ê²½ë³µê¶',
                    numOfRows: '3',
                    pageNo: '1',
                    arrange: 'C'
                });
                
                const items = data.response.body.items.item || [];
                
                result.className = 'success';
                result.innerHTML = `
                    <h4>âœ… í‚¤ì›Œë“œ ê²€ìƒ‰ ì„±ê³µ!</h4>
                    <p>ğŸ” "ê²½ë³µê¶" ê²€ìƒ‰ ê²°ê³¼: ${items.length}ê°œ</p>
                    ${items.map((item, index) => `
                        <div style="margin: 10px 0; padding: 10px; background: rgba(255,255,255,0.1); border-radius: 5px;">
                            <strong>${index + 1}. ${item.title}</strong><br>
                            ğŸ“ ${item.addr1 || 'ì£¼ì†Œ ì •ë³´ ì—†ìŒ'}<br>
                            ğŸ“ ${item.tel || 'ì „í™”ë²ˆí˜¸ ì—†ìŒ'}
                        </div>
                    `).join('')}
                `;
                
            } catch (error) {
                result.className = 'error';
                result.innerHTML = `<h4>âŒ í‚¤ì›Œë“œ ê²€ìƒ‰ ì‹¤íŒ¨</h4><p>${error.message}</p>`;
            }
            
            ë²„íŠ¼í™œì„±í™”(button, 'í…ŒìŠ¤íŠ¸ ì‹¤í–‰');
        }

        async function ìœ„ì¹˜í…ŒìŠ¤íŠ¸() {
            const result = document.getElementById('locationResult');
            const button = event.target;
            ë²„íŠ¼ë¹„í™œì„±í™”(button);
            
            try {
                const data = await ê´€ê´‘ê³µì‚¬APIí˜¸ì¶œ('locationBasedList2', {
                    mapX: '127.0276',   // ê°•ë‚¨ì—­ ê²½ë„
                    mapY: '37.4979',    // ê°•ë‚¨ì—­ ìœ„ë„
                    radius: '1000',     // 1km
                    numOfRows: '3',
                    pageNo: '1'
                });
                
                const items = data.response.body.items.item || [];
                
                result.className = 'success';
                result.innerHTML = `
                    <h4>âœ… ìœ„ì¹˜ ê¸°ë°˜ ê²€ìƒ‰ ì„±ê³µ!</h4>
                    <p>ğŸ“ ê°•ë‚¨ì—­ 1km ë°˜ê²½ ë‚´ ê´€ê´‘ì§€: ${items.length}ê°œ</p>
                    ${items.map((item, index) => `
                        <div style="margin: 10px 0; padding: 10px; background: rgba(255,255,255,0.1); border-radius: 5px;">
                            <strong>${index + 1}. ${item.title}</strong><br>
                            ğŸ“ ê±°ë¦¬: ${item.dist ? Math.round(item.dist) + 'm' : 'ì •ë³´ ì—†ìŒ'}<br>
                            ğŸ“ ${item.addr1 || 'ì£¼ì†Œ ì •ë³´ ì—†ìŒ'}
                        </div>
                    `).join('')}
                `;
                
            } catch (error) {
                result.className = 'error';
                result.innerHTML = `<h4>âŒ ìœ„ì¹˜ ê¸°ë°˜ ê²€ìƒ‰ ì‹¤íŒ¨</h4><p>${error.message}</p>`;
            }
            
            ë²„íŠ¼í™œì„±í™”(button, 'í…ŒìŠ¤íŠ¸ ì‹¤í–‰');
        }

        async function ë°°ì¹˜í…ŒìŠ¤íŠ¸() {
            const result = document.getElementById('batchResult');
            const button = event.target;
            ë²„íŠ¼ë¹„í™œì„±í™”(button);
            
            try {
                // ë¨¼ì € ëª‡ ê°œì˜ contentIdë¥¼ ê°€ì ¸ì˜¨ í›„ ìƒì„¸ ì •ë³´ ì¡°íšŒ
                const listData = await ê´€ê´‘ê³µì‚¬APIí˜¸ì¶œ('areaBasedList2', {
                    areaCode: '1',
                    numOfRows: '3',
                    pageNo: '1'
                });
                
                const items = listData.response.body.items.item || [];
                const contentIds = items.slice(0, 2).map(item => item.contentid);
                
                if (contentIds.length === 0) {
                    throw new Error('í…ŒìŠ¤íŠ¸í•  contentIdë¥¼ ê°€ì ¸ì˜¬ ìˆ˜ ì—†ìŠµë‹ˆë‹¤');
                }
                
                // ê° contentIdì— ëŒ€í•´ ìƒì„¸ ì •ë³´ ì¡°íšŒ
                const detailPromises = contentIds.map(async (contentId) => {
                    try {
                        const detailData = await ê´€ê´‘ê³µì‚¬APIí˜¸ì¶œ('detailCommon2', {
                            contentId: contentId,
                            defaultYN: 'Y',
                            firstImageYN: 'Y',
                            areacodeYN: 'Y',
                            catcodeYN: 'Y',
                            addrinfoYN: 'Y',
                            mapinfoYN: 'Y',
                            overviewYN: 'Y'
                        });
                        return { contentId, success: true, data: detailData.response.body.items.item[0] };
                    } catch (error) {
                        return { contentId, success: false, error: error.message };
                    }
                });
                
                const results = await Promise.all(detailPromises);
                const successCount = results.filter(r => r.success).length;
                
                result.className = 'success';
                result.innerHTML = `
                    <h4>âœ… ë°°ì¹˜ í…ŒìŠ¤íŠ¸ ì™„ë£Œ!</h4>
                    <p>ğŸ“Š ì´ ${results.length}ê°œ ì¤‘ ${successCount}ê°œ ì„±ê³µ</p>
                    ${results.map((item, index) => `
                        <div style="margin: 10px 0; padding: 10px; background: rgba(255,255,255,0.1); border-radius: 5px;">
                            <strong>${index + 1}. ContentID: ${item.contentId}</strong><br>
                            ${item.success ? 
                                `âœ… ì„±ê³µ: ${item.data.title}<br>ğŸ“ ${item.data.addr1 || 'ì£¼ì†Œ ì—†ìŒ'}` : 
                                `âŒ ì‹¤íŒ¨: ${item.error}`
                            }
                        </div>
                    `).join('')}
                `;
                
            } catch (error) {
                result.className = 'error';
                result.innerHTML = `<h4>âŒ ë°°ì¹˜ í…ŒìŠ¤íŠ¸ ì‹¤íŒ¨</h4><p>${error.message}</p>`;
            }
            
            ë²„íŠ¼í™œì„±í™”(button, 'í…ŒìŠ¤íŠ¸ ì‹¤í–‰');
        }
    </script>
</body>
</html>
