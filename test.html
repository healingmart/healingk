<!DOCTYPE html>
<html lang="ko">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>ê´€ê´‘ API ì¢…í•© í…ŒìŠ¤íŠ¸</title>
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }
        
        body {
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            min-height: 100vh;
            padding: 20px;
        }
        
        .container {
            max-width: 1400px;
            margin: 0 auto;
            background: white;
            border-radius: 20px;
            box-shadow: 0 20px 60px rgba(0,0,0,0.1);
            overflow: hidden;
        }
        
        .header {
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            color: white;
            padding: 30px;
            text-align: center;
        }
        
        .header h1 {
            font-size: 2.5rem;
            margin-bottom: 10px;
        }
        
        .header p {
            font-size: 1.1rem;
            opacity: 0.9;
        }
        
        .test-section {
            padding: 30px;
        }
        
        .test-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(350px, 1fr));
            gap: 25px;
            margin-bottom: 30px;
        }
        
        .test-card {
            background: #f8f9fa;
            border-radius: 15px;
            padding: 25px;
            border: 2px solid #e9ecef;
            transition: all 0.3s ease;
        }
        
        .test-card:hover {
            border-color: #667eea;
            transform: translateY(-2px);
            box-shadow: 0 10px 30px rgba(102, 126, 234, 0.1);
        }
        
        .test-card h3 {
            color: #495057;
            margin-bottom: 15px;
            font-size: 1.3rem;
        }
        
        .test-card .description {
            color: #6c757d;
            margin-bottom: 20px;
            line-height: 1.5;
        }
        
        .form-group {
            margin-bottom: 15px;
        }
        
        .form-group label {
            display: block;
            margin-bottom: 5px;
            font-weight: 600;
            color: #495057;
        }
        
        .form-group input, 
        .form-group select {
            width: 100%;
            padding: 10px;
            border: 2px solid #e9ecef;
            border-radius: 8px;
            font-size: 14px;
            transition: border-color 0.3s ease;
        }
        
        .form-group input:focus,
        .form-group select:focus {
            outline: none;
            border-color: #667eea;
        }
        
        .btn {
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            color: white;
            border: none;
            padding: 12px 25px;
            border-radius: 8px;
            cursor: pointer;
            font-size: 14px;
            font-weight: 600;
            transition: all 0.3s ease;
            width: 100%;
        }
        
        .btn:hover {
            transform: translateY(-1px);
            box-shadow: 0 5px 15px rgba(102, 126, 234, 0.3);
        }
        
        .btn:disabled {
            background: #6c757d;
            cursor: not-allowed;
            transform: none;
        }
        
        .results {
            margin-top: 30px;
            padding: 25px;
            background: #f8f9fa;
            border-radius: 15px;
            border: 2px solid #e9ecef;
        }
        
        .results h3 {
            color: #495057;
            margin-bottom: 20px;
        }
        
        .result-item {
            background: white;
            padding: 20px;
            margin-bottom: 15px;
            border-radius: 10px;
            border-left: 4px solid #667eea;
        }
        
        .result-header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 10px;
        }
        
        .result-title {
            font-weight: 600;
            color: #495057;
        }
        
        .result-time {
            color: #6c757d;
            font-size: 0.9rem;
        }
        
        .result-stats {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(120px, 1fr));
            gap: 10px;
            margin-top: 15px;
        }
        
        .stat-item {
            text-align: center;
            padding: 10px;
            background: #f8f9fa;
            border-radius: 6px;
        }
        
        .stat-value {
            font-size: 1.2rem;
            font-weight: 600;
            color: #667eea;
        }
        
        .stat-label {
            font-size: 0.8rem;
            color: #6c757d;
            margin-top: 5px;
        }
        
        .loading {
            text-align: center;
            padding: 40px;
            color: #6c757d;
        }
        
        .loading::after {
            content: '';
            display: inline-block;
            width: 20px;
            height: 20px;
            border: 3px solid #f3f3f3;
            border-top: 3px solid #667eea;
            border-radius: 50%;
            animation: spin 1s linear infinite;
            margin-left: 10px;
        }
        
        @keyframes spin {
            0% { transform: rotate(0deg); }
            100% { transform: rotate(360deg); }
        }
        
        .error {
            color: #dc3545;
            padding: 15px;
            background: #f8d7da;
            border: 1px solid #f5c6cb;
            border-radius: 8px;
            margin-top: 10px;
        }
        
        .success {
            color: #155724;
            padding: 15px;
            background: #d4edda;
            border: 1px solid #c3e6cb;
            border-radius: 8px;
            margin-top: 10px;
        }
        
        .location-section {
            background: #e3f2fd;
            padding: 20px;
            border-radius: 10px;
            margin-bottom: 20px;
        }
        
        .current-location {
            display: flex;
            align-items: center;
            gap: 10px;
            margin-bottom: 15px;
        }
        
        .location-btn {
            background: #2196f3;
            color: white;
            border: none;
            padding: 8px 15px;
            border-radius: 6px;
            cursor: pointer;
            font-size: 12px;
        }
    </style>
</head>
<body>
    <div class="container">
        <div class="header">
            <h1>ğŸ–ï¸ ê´€ê´‘ API ì¢…í•© í…ŒìŠ¤íŠ¸</h1>
            <p>ë‹¤ì–‘í•œ ê²€ìƒ‰ ì‹œë‚˜ë¦¬ì˜¤ë¡œ API ì„±ëŠ¥ê³¼ ê¸°ëŠ¥ì„ ì¢…í•©ì ìœ¼ë¡œ í…ŒìŠ¤íŠ¸í•©ë‹ˆë‹¤</p>
        </div>
        
        <div class="test-section">
            <div class="test-grid">
                <!-- í‚¤ì›Œë“œ ê²€ìƒ‰ í…ŒìŠ¤íŠ¸ -->
                <div class="test-card">
                    <h3>ğŸ” í‚¤ì›Œë“œ ê²€ìƒ‰</h3>
                    <p class="description">íŠ¹ì • í‚¤ì›Œë“œë¡œ ê´€ê´‘ì§€ë¥¼ ê²€ìƒ‰í•©ë‹ˆë‹¤</p>
                    
                    <div class="form-group">
                        <label>ê²€ìƒ‰ í‚¤ì›Œë“œ</label>
                        <input type="text" id="keyword" value="ì œì£¼ë„" placeholder="ì˜ˆ: ì œì£¼ë„, ê²½ë³µê¶">
                    </div>
                    
                    <div class="form-group">
                        <label>ê²°ê³¼ ê°œìˆ˜</label>
                        <select id="keywordRows">
                            <option value="5">5ê°œ</option>
                            <option value="10" selected>10ê°œ</option>
                            <option value="20">20ê°œ</option>
                        </select>
                    </div>
                    
                    <button class="btn" onclick="testKeywordSearch()">ê²€ìƒ‰ ì‹œì‘</button>
                </div>
                
                <!-- ì§€ì—­ë³„ ê²€ìƒ‰ í…ŒìŠ¤íŠ¸ -->
                <div class="test-card">
                    <h3>ğŸ—ºï¸ ì§€ì—­ë³„ ê²€ìƒ‰</h3>
                    <p class="description">íŠ¹ì • ì§€ì—­ì˜ ê´€ê´‘ì§€ë¥¼ ê²€ìƒ‰í•©ë‹ˆë‹¤</p>
                    
                    <div class="form-group">
                        <label>ì§€ì—­ ì„ íƒ</label>
                        <select id="areaCode">
                            <option value="1">ì„œìš¸</option>
                            <option value="6">ë¶€ì‚°</option>
                            <option value="39" selected>ì œì£¼</option>
                            <option value="32">ê°•ì›</option>
                            <option value="35">ê²½ë¶</option>
                        </select>
                    </div>
                    
                    <div class="form-group">
                        <label>ì½˜í…ì¸  íƒ€ì…</label>
                        <select id="contentType">
                            <option value="">ì „ì²´</option>
                            <option value="12" selected>ê´€ê´‘ì§€</option>
                            <option value="32">ìˆ™ë°•</option>
                            <option value="39">ìŒì‹ì </option>
                            <option value="38">ì‡¼í•‘</option>
                        </select>
                    </div>
                    
                    <button class="btn" onclick="testAreaSearch()">ê²€ìƒ‰ ì‹œì‘</button>
                </div>
                
                <!-- ê±°ë¦¬ ê¸°ë°˜ ê²€ìƒ‰ í…ŒìŠ¤íŠ¸ -->
                <div class="test-card">
                    <h3>ğŸ“ ê±°ë¦¬ ê¸°ë°˜ ê²€ìƒ‰</h3>
                    <p class="description">í˜„ì¬ ìœ„ì¹˜ ê¸°ì¤€ìœ¼ë¡œ ê°€ê¹Œìš´ ê´€ê´‘ì§€ë¥¼ ê²€ìƒ‰í•©ë‹ˆë‹¤</p>
                    
                    <div class="location-section">
                        <div class="current-location">
                            <span>í˜„ì¬ ìœ„ì¹˜:</span>
                            <button class="location-btn" onclick="getCurrentLocation()">ìœ„ì¹˜ ê°€ì ¸ì˜¤ê¸°</button>
                        </div>
                        <div id="locationDisplay">ìœ„ì¹˜ë¥¼ ê°€ì ¸ì™€ì£¼ì„¸ìš”</div>
                    </div>
                    
                    <div class="form-group">
                        <label>ê²€ìƒ‰ ë°˜ê²½ (km)</label>
                        <select id="radius">
                            <option value="1">1km</option>
                            <option value="3" selected>3km</option>
                            <option value="5">5km</option>
                            <option value="10">10km</option>
                            <option value="20">20km</option>
                        </select>
                    </div>
                    
                    <div class="form-group">
                        <label>ì§€ì—­ ì œí•œ</label>
                        <select id="distanceArea">
                            <option value="1">ì„œìš¸</option>
                            <option value="6">ë¶€ì‚°</option>
                            <option value="39">ì œì£¼</option>
                            <option value="31">ê²½ê¸°</option>
                        </select>
                    </div>
                    
                    <button class="btn" onclick="testDistanceSearch()" id="distanceBtn" disabled>ìœ„ì¹˜ ì„¤ì • í›„ ê²€ìƒ‰</button>
                </div>
                
                <!-- ì„±ëŠ¥ í…ŒìŠ¤íŠ¸ -->
                <div class="test-card">
                    <h3>âš¡ ì„±ëŠ¥ í…ŒìŠ¤íŠ¸</h3>
                    <p class="description">API ì„±ëŠ¥ê³¼ ì•ˆì •ì„±ì„ í…ŒìŠ¤íŠ¸í•©ë‹ˆë‹¤</p>
                    
                    <div class="form-group">
                        <label>í…ŒìŠ¤íŠ¸ ì‹œë‚˜ë¦¬ì˜¤</label>
                        <select id="performanceType">
                            <option value="basic">ê¸°ë³¸ ê²€ìƒ‰</option>
                            <option value="detailed">ìƒì„¸ì •ë³´ í¬í•¨</option>
                            <option value="large">ëŒ€ìš©ëŸ‰ ë°ì´í„°</option>
                            <option value="concurrent">ë™ì‹œ ìš”ì²­</option>
                        </select>
                    </div>
                    
                    <div class="form-group">
                        <label>ë°˜ë³µ íšŸìˆ˜</label>
                        <select id="repeatCount">
                            <option value="1">1íšŒ</option>
                            <option value="3" selected>3íšŒ</option>
                            <option value="5">5íšŒ</option>
                        </select>
                    </div>
                    
                    <button class="btn" onclick="testPerformance()">ì„±ëŠ¥ í…ŒìŠ¤íŠ¸ ì‹œì‘</button>
                </div>
                
                <!-- ì¢…í•© í…ŒìŠ¤íŠ¸ -->
                <div class="test-card">
                    <h3>ğŸ¯ ì¢…í•© í…ŒìŠ¤íŠ¸</h3>
                    <p class="description">ëª¨ë“  ê¸°ëŠ¥ì„ ìˆœì°¨ì ìœ¼ë¡œ í…ŒìŠ¤íŠ¸í•©ë‹ˆë‹¤</p>
                    
                    <div class="form-group">
                        <label>í…ŒìŠ¤íŠ¸ ëª¨ë“œ</label>
                        <select id="comprehensiveMode">
                            <option value="quick">ë¹ ë¥¸ í…ŒìŠ¤íŠ¸</option>
                            <option value="thorough" selected>ìƒì„¸ í…ŒìŠ¤íŠ¸</option>
                            <option value="stress">ìŠ¤íŠ¸ë ˆìŠ¤ í…ŒìŠ¤íŠ¸</option>
                        </select>
                    </div>
                    
                    <div class="form-group">
                        <label>ë””ë²„ê·¸ ëª¨ë“œ</label>
                        <select id="debugMode">
                            <option value="false">ë¹„í™œì„±í™”</option>
                            <option value="true">í™œì„±í™”</option>
                        </select>
                    </div>
                    
                    <button class="btn" onclick="testComprehensive()">ì¢…í•© í…ŒìŠ¤íŠ¸ ì‹œì‘</button>
                </div>
                
                <!-- ì‹¤ì‹œê°„ ëª¨ë‹ˆí„°ë§ -->
                <div class="test-card">
                    <h3>ğŸ“Š ì‹¤ì‹œê°„ ëª¨ë‹ˆí„°ë§</h3>
                    <p class="description">API ìƒíƒœë¥¼ ì‹¤ì‹œê°„ìœ¼ë¡œ ëª¨ë‹ˆí„°ë§í•©ë‹ˆë‹¤</p>
                    
                    <div class="form-group">
                        <label>ëª¨ë‹ˆí„°ë§ ê°„ê²©</label>
                        <select id="monitorInterval">
                            <option value="10">10ì´ˆ</option>
                            <option value="30" selected>30ì´ˆ</option>
                            <option value="60">1ë¶„</option>
                        </select>
                    </div>
                    
                    <div id="monitorStatus" style="margin: 15px 0; padding: 10px; background: #f8f9fa; border-radius: 6px;">
                        <strong>ìƒíƒœ:</strong> <span id="statusText">ëŒ€ê¸° ì¤‘</span>
                    </div>
                    
                    <button class="btn" onclick="toggleMonitoring()" id="monitorBtn">ëª¨ë‹ˆí„°ë§ ì‹œì‘</button>
                </div>
            </div>
            
            <!-- ê²°ê³¼ ì˜ì—­ -->
            <div class="results" id="results" style="display: none;">
                <h3>ğŸ“‹ í…ŒìŠ¤íŠ¸ ê²°ê³¼</h3>
                <div id="resultContent"></div>
            </div>
        </div>
    </div>

    <script>
        // ì „ì—­ ë³€ìˆ˜
        let currentLocation = null;
        let monitoringInterval = null;
        let testResults = [];
        
        // API ê¸°ë³¸ URL
        const API_BASE_URL = '/api/alltourism';
        
        // í˜„ì¬ ìœ„ì¹˜ ê°€ì ¸ì˜¤ê¸°
        function getCurrentLocation() {
            if (!navigator.geolocation) {
                alert('ì´ ë¸Œë¼ìš°ì €ëŠ” ìœ„ì¹˜ ì„œë¹„ìŠ¤ë¥¼ ì§€ì›í•˜ì§€ ì•ŠìŠµë‹ˆë‹¤.');
                return;
            }
            
            document.getElementById('locationDisplay').innerHTML = 'ìœ„ì¹˜ë¥¼ ê°€ì ¸ì˜¤ëŠ” ì¤‘...';
            
            navigator.geolocation.getCurrentPosition(
                (position) => {
                    currentLocation = {
                        lat: position.coords.latitude,
                        lng: position.coords.longitude
                    };
                    
                    document.getElementById('locationDisplay').innerHTML = 
                        `ìœ„ë„: ${currentLocation.lat.toFixed(6)}, ê²½ë„: ${currentLocation.lng.toFixed(6)}`;
                    
                    document.getElementById('distanceBtn').disabled = false;
                    document.getElementById('distanceBtn').textContent = 'ê±°ë¦¬ ê¸°ë°˜ ê²€ìƒ‰';
                },
                (error) => {
                    document.getElementById('locationDisplay').innerHTML = 
                        `ìœ„ì¹˜ ê°€ì ¸ì˜¤ê¸° ì‹¤íŒ¨: ${error.message}`;
                    console.error('ìœ„ì¹˜ ê°€ì ¸ì˜¤ê¸° ì‹¤íŒ¨:', error);
                },
                {
                    enableHighAccuracy: true,
                    timeout: 10000,
                    maximumAge: 300000
                }
            );
        }
        
        // API í˜¸ì¶œ í•¨ìˆ˜
        async function callAPI(params) {
            const url = new URL(API_BASE_URL, window.location.origin);
            Object.keys(params).forEach(key => {
                if (params[key] !== null && params[key] !== '') {
                    url.searchParams.append(key, params[key]);
                }
            });
            
            const startTime = performance.now();
            
            try {
                const response = await fetch(url);
                const data = await response.json();
                const endTime = performance.now();
                
                return {
                    success: true,
                    data: data,
                    responseTime: endTime - startTime,
                    url: url.toString()
                };
            } catch (error) {
                const endTime = performance.now();
                
                return {
                    success: false,
                    error: error.message,
                    responseTime: endTime - startTime,
                    url: url.toString()
                };
            }
        }
        
        // ê²°ê³¼ í‘œì‹œ í•¨ìˆ˜
        function displayResult(testName, result) {
            const resultsDiv = document.getElementById('results');
            const contentDiv = document.getElementById('resultContent');
            
            resultsDiv.style.display = 'block';
            
            const resultItem = document.createElement('div');
            resultItem.className = 'result-item';
            
            const timestamp = new Date().toLocaleTimeString();
            const isSuccess = result.success && result.data?.success;
            
            let statusClass = isSuccess ? 'success' : 'error';
            let statusText = isSuccess ? 'ì„±ê³µ' : 'ì‹¤íŒ¨';
            
            let statsHTML = '';
            if (isSuccess && result.data?.data) {
                const data = result.data.data;
                const performance = result.data.performance;
                
                statsHTML = `
                    <div class="result-stats">
                        <div class="stat-item">
                            <div class="stat-value">${data.resultInfo?.actualCount || 0}</div>
                            <div class="stat-label">ê²°ê³¼ ìˆ˜</div>
                        </div>
                        <div class="stat-item">
                            <div class="stat-value">${Math.round(result.responseTime)}ms</div>
                            <div class="stat-label">ì‘ë‹µ ì‹œê°„</div>
                        </div>
                        <div class="stat-item">
                            <div class="stat-value">${data.resultInfo?.detailedCount || 0}</div>
                            <div class="stat-label">ìƒì„¸ ì •ë³´</div>
                        </div>
                        <div class="stat-item">
                            <div class="stat-value">${data.detailStats?.avgCompleteness || 0}%</div>
                            <div class="stat-label">ì™„ì„±ë„</div>
                        </div>
                        <div class="stat-item">
                            <div class="stat-value">${performance?.itemsPerSecond || 0}</div>
                            <div class="stat-label">ì²˜ë¦¬ìœ¨/ì´ˆ</div>
                        </div>
                        <div class="stat-item">
                            <div class="stat-value">${data.resultInfo?.withDistance || 0}</div>
                            <div class="stat-label">ê±°ë¦¬ ì •ë³´</div>
                        </div>
                    </div>
                `;
            }
            
            resultItem.innerHTML = `
                <div class="result-header">
                    <div class="result-title">${testName}</div>
                    <div class="result-time">${timestamp} - <span class="${statusClass}">${statusText}</span></div>
                </div>
                <div style="margin: 10px 0;">
                    <strong>ìš”ì²­ URL:</strong> <small>${result.url}</small>
                </div>
                ${isSuccess ? statsHTML : `<div class="error">ì˜¤ë¥˜: ${result.error || result.data?.message || 'ì•Œ ìˆ˜ ì—†ëŠ” ì˜¤ë¥˜'}</div>`}
            `;
            
            contentDiv.insertBefore(resultItem, contentDiv.firstChild);
            
            // ê²°ê³¼ ì €ì¥
            testResults.push({
                testName,
                timestamp,
                success: isSuccess,
                responseTime: result.responseTime,
                data: result.data
            });
        }
        
        // ë¡œë”© í‘œì‹œ
        function showLoading(testName) {
            const resultsDiv = document.getElementById('results');
            const contentDiv = document.getElementById('resultContent');
            
            resultsDiv.style.display = 'block';
            
            const loadingItem = document.createElement('div');
            loadingItem.className = 'loading';
            loadingItem.id = 'loading-item';
            loadingItem.innerHTML = `${testName} ì‹¤í–‰ ì¤‘`;
            
            contentDiv.insertBefore(loadingItem, contentDiv.firstChild);
        }
        
        function hideLoading() {
            const loadingItem = document.getElementById('loading-item');
            if (loadingItem) {
                loadingItem.remove();
            }
        }
        
        // í…ŒìŠ¤íŠ¸ í•¨ìˆ˜ë“¤
        async function testKeywordSearch() {
            const keyword = document.getElementById('keyword').value;
            const numOfRows = document.getElementById('keywordRows').value;
            
            if (!keyword) {
                alert('ê²€ìƒ‰ í‚¤ì›Œë“œë¥¼ ì…ë ¥í•´ì£¼ì„¸ìš”.');
                return;
            }
            
            showLoading('í‚¤ì›Œë“œ ê²€ìƒ‰');
            
            const result = await callAPI({
                keyword: keyword,
                numOfRows: numOfRows,
                detailed: 'true',
                detailedCount: '5',
                includeImages: 'true'
            });
            
            hideLoading();
            displayResult(`í‚¤ì›Œë“œ ê²€ìƒ‰: "${keyword}"`, result);
        }
        
        async function testAreaSearch() {
            const areaCode = document.getElementById('areaCode').value;
            const contentTypeId = document.getElementById('contentType').value;
            
            showLoading('ì§€ì—­ë³„ ê²€ìƒ‰');
            
            const result = await callAPI({
                areaCode: areaCode,
                contentTypeId: contentTypeId,
                numOfRows: '10',
                detailed: 'true',
                detailedCount: '5',
                includeImages: 'true'
            });
            
            hideLoading();
            displayResult(`ì§€ì—­ë³„ ê²€ìƒ‰: ${getAreaName(areaCode)}`, result);
        }
        
        async function testDistanceSearch() {
            if (!currentLocation) {
                alert('ìœ„ì¹˜ ì •ë³´ë¥¼ ë¨¼ì € ê°€ì ¸ì™€ì£¼ì„¸ìš”.');
                return;
            }
            
            const radius = document.getElementById('radius').value;
            const areaCode = document.getElementById('distanceArea').value;
            
            showLoading('ê±°ë¦¬ ê¸°ë°˜ ê²€ìƒ‰');
            
            const result = await callAPI({
                areaCode: areaCode,
                userLat: currentLocation.lat.toString(),
                userLng: currentLocation.lng.toString(),
                radius: radius,
                sortBy: 'distance',
                sortOrder: 'asc',
                numOfRows: '10',
                detailed: 'true',
                detailedCount: '3',
                includeImages: 'true',
                debug: 'true'
            });
            
            hideLoading();
            displayResult(`ê±°ë¦¬ ê¸°ë°˜ ê²€ìƒ‰: ${radius}km ë°˜ê²½`, result);
        }
        
        async function testPerformance() {
            const performanceType = document.getElementById('performanceType').value;
            const repeatCount = parseInt(document.getElementById('repeatCount').value);
            
            showLoading('ì„±ëŠ¥ í…ŒìŠ¤íŠ¸');
            
            const results = [];
            
            for (let i = 0; i < repeatCount; i++) {
                let params = {};
                
                switch (performanceType) {
                    case 'basic':
                        params = { keyword: 'ê´€ê´‘ì§€', numOfRows: '5' };
                        break;
                    case 'detailed':
                        params = { 
                            keyword: 'ì œì£¼ë„', 
                            numOfRows: '10', 
                            detailed: 'true', 
                            detailedCount: '10',
                            includeImages: 'true'
                        };
                        break;
                    case 'large':
                        params = { areaCode: '39', numOfRows: '100' };
                        break;
                    case 'concurrent':
                        // ë™ì‹œ ìš”ì²­ì€ ë³„ë„ ì²˜ë¦¬
                        break;
                }
                
                const result = await callAPI(params);
                results.push(result);
                
                // ìš”ì²­ ê°„ ê°„ê²©
                if (i < repeatCount - 1) {
                    await new Promise(resolve => setTimeout(resolve, 1000));
                }
            }
            
            hideLoading();
            
            // ì„±ëŠ¥ í†µê³„ ê³„ì‚°
            const avgResponseTime = results.reduce((sum, r) => sum + r.responseTime, 0) / results.length;
            const successRate = (results.filter(r => r.success).length / results.length) * 100;
            
            displayResult(`ì„±ëŠ¥ í…ŒìŠ¤íŠ¸ (${repeatCount}íšŒ í‰ê· : ${Math.round(avgResponseTime)}ms, ì„±ê³µë¥ : ${successRate.toFixed(1)}%)`, {
                success: true,
                data: {
                    success: true,
                    data: {
                        resultInfo: { actualCount: `${repeatCount}íšŒ í…ŒìŠ¤íŠ¸` },
                        detailStats: { avgCompleteness: successRate }
                    },
                    performance: { itemsPerSecond: Math.round(1000 / avgResponseTime) }
                },
                responseTime: avgResponseTime,
                url: 'ì„±ëŠ¥ í…ŒìŠ¤íŠ¸'
            });
        }
        
        async function testComprehensive() {
            const mode = document.getElementById('comprehensiveMode').value;
            const debug = document.getElementById('debugMode').value;
            
            showLoading('ì¢…í•© í…ŒìŠ¤íŠ¸');
            
            const tests = [
                { name: 'ê¸°ë³¸ í‚¤ì›Œë“œ ê²€ìƒ‰', params: { keyword: 'ì„œìš¸', numOfRows: '5' } },
                { name: 'ìƒì„¸ ì •ë³´ ê²€ìƒ‰', params: { keyword: 'ì œì£¼ë„', detailed: 'true', detailedCount: '3', includeImages: 'true' } },
                { name: 'ì§€ì—­ë³„ ê²€ìƒ‰', params: { areaCode: '1', contentTypeId: '12', numOfRows: '5' } },
                { name: 'íƒ€ì…ë³„ ê²€ìƒ‰', params: { contentTypeId: '39', numOfRows: '5' } }
            ];
            
            if (mode === 'thorough') {
                tests.push(
                    { name: 'ëŒ€ìš©ëŸ‰ ê²€ìƒ‰', params: { areaCode: '39', numOfRows: '50' } },
                    { name: 'ì¶•ì œ ê²€ìƒ‰', params: { contentTypeId: '15', numOfRows: '5' } }
                );
            }
            
            if (mode === 'stress') {
                tests.push(
                    { name: 'ìµœëŒ€ ê²°ê³¼', params: { numOfRows: '1000' } },
                    { name: 'ë¹ˆ ê²°ê³¼', params: { keyword: 'impossiblekeyword123' } }
                );
            }
            
            hideLoading();
            
            for (const test of tests) {
                showLoading(test.name);
                
                if (debug === 'true') {
                    test.params.debug = 'true';
                }
                
                const result = await callAPI(test.params);
                
                hideLoading();
                displayResult(test.name, result);
                
                // í…ŒìŠ¤íŠ¸ ê°„ ê°„ê²©
                await new Promise(resolve => setTimeout(resolve, 2000));
            }
        }
        
        // ëª¨ë‹ˆí„°ë§ í•¨ìˆ˜
        function toggleMonitoring() {
            const btn = document.getElementById('monitorBtn');
            const statusText = document.getElementById('statusText');
            
            if (monitoringInterval) {
                clearInterval(monitoringInterval);
                monitoringInterval = null;
                btn.textContent = 'ëª¨ë‹ˆí„°ë§ ì‹œì‘';
                statusText.textContent = 'ëŒ€ê¸° ì¤‘';
                statusText.style.color = '#6c757d';
            } else {
                const interval = parseInt(document.getElementById('monitorInterval').value) * 1000;
                
                monitoringInterval = setInterval(async () => {
                    statusText.textContent = 'í™•ì¸ ì¤‘...';
                    statusText.style.color = '#ffc107';
                    
                    const result = await callAPI({
                        keyword: 'test',
                        numOfRows: '1'
                    });
                    
                    if (result.success) {
                        statusText.textContent = `ì •ìƒ (${Math.round(result.responseTime)}ms)`;
                        statusText.style.color = '#28a745';
                    } else {
                        statusText.textContent = 'ì˜¤ë¥˜ ë°œìƒ';
                        statusText.style.color = '#dc3545';
                    }
                }, interval);
                
                btn.textContent = 'ëª¨ë‹ˆí„°ë§ ì¤‘ì§€';
                statusText.textContent = 'ì‹œì‘ë¨';
                statusText.style.color = '#28a745';
            }
        }
        
        // ìœ í‹¸ë¦¬í‹° í•¨ìˆ˜
        function getAreaName(code) {
            const areas = {
                '1': 'ì„œìš¸', '6': 'ë¶€ì‚°', '39': 'ì œì£¼', 
                '32': 'ê°•ì›', '35': 'ê²½ë¶', '31': 'ê²½ê¸°'
            };
            return areas[code] || code;
        }
        
        // í˜ì´ì§€ ë¡œë“œ ì‹œ ì´ˆê¸°í™”
        window.addEventListener('load', () => {
            console.log('ê´€ê´‘ API í…ŒìŠ¤íŠ¸ í˜ì´ì§€ê°€ ë¡œë“œë˜ì—ˆìŠµë‹ˆë‹¤.');
            
            // ê¸°ë³¸ ìœ„ì¹˜ ì„¤ì • (ì„œìš¸ ì‹œì²­)
            currentLocation = { lat: 37.5665, lng: 126.9780 };
            document.getElementById('locationDisplay').innerHTML = 
                `ê¸°ë³¸ ìœ„ì¹˜: ì„œìš¸ì‹œì²­ (ìœ„ë„: ${currentLocation.lat}, ê²½ë„: ${currentLocation.lng})`;
            document.getElementById('distanceBtn').disabled = false;
            document.getElementById('distanceBtn').textContent = 'ê±°ë¦¬ ê¸°ë°˜ ê²€ìƒ‰';
        });
    </script>
</body>
</html>
